"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getTokenDecimals = getTokenDecimals;
const web3_js_1 = require("@solana/web3.js");
async function getTokenDecimals(connection, mintAddress) {
    try {
        const info = await connection.getParsedAccountInfo(new web3_js_1.PublicKey(mintAddress));
        if (!info.value)
            throw new Error('Token mint not found');
        const data = info.value.data;
        if (!('parsed' in data))
            throw new Error('Failed to parse mint account data');
        const { decimals } = data.parsed.info;
        return decimals;
    }
    catch (error) {
        console.error('Error fetching token decimals:', error);
        throw new Error(`Failed to get decimals for token ${mintAddress}`);
    }
}
