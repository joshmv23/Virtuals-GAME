"use strict";var LitAction=(()=>{var x=(s,e)=>()=>(s&&(e=s(s=0)),e);var ft=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);function ht(s){Oe=s}function me(){return Oe}function u(s,e){let t=me(),r=ge({issueData:e,data:s.data,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,t,t===ne?void 0:ne].filter(n=>!!n)});s.common.issues.push(r)}function ye(s,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(s):r?r.value:e.get(s)}function Ne(s,e,t,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(s,t):n?n.value=t:e.set(s,t),t}function y(s){if(!s)return{};let{errorMap:e,invalid_type_error:t,required_error:r,description:n}=s;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(i,o)=>{var l,c;let{message:h}=s;return i.code==="invalid_enum_value"?{message:h??o.defaultError}:typeof o.data>"u"?{message:(l=h??r)!==null&&l!==void 0?l:o.defaultError}:i.code!=="invalid_type"?{message:o.defaultError}:{message:(c=h??t)!==null&&c!==void 0?c:o.defaultError}},description:n}}function je(s){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return s.precision?e=`${e}\\.\\d{${s.precision}}`:s.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Ot(s){return new RegExp(`^${je(s)}$`)}function Ze(s){let e=`${De}T${je(s)}`,t=[];return t.push(s.local?"Z?":"Z"),s.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Nt(s,e){return!!((e==="v4"||!e)&&It.test(s)||(e==="v6"||!e)&&Pt.test(s))}function Dt(s,e){if(!xt.test(s))return!1;try{let[t]=s.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),n=JSON.parse(atob(r));return!(typeof n!="object"||n===null||!n.typ||!n.alg||e&&n.alg!==e)}catch{return!1}}function jt(s,e){return!!((e==="v4"||!e)&&Ct.test(s)||(e==="v6"||!e)&&At.test(s))}function Zt(s,e){let t=(s.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,n=t>r?t:r,a=parseInt(s.toFixed(n).replace(".","")),i=parseInt(e.toFixed(n).replace(".",""));return a%i/Math.pow(10,n)}function se(s){if(s instanceof w){let e={};for(let t in s.shape){let r=s.shape[t];e[t]=P.create(se(r))}return new w({...s._def,shape:()=>e})}else return s instanceof j?new j({...s._def,type:se(s.element)}):s instanceof P?P.create(se(s.unwrap())):s instanceof R?R.create(se(s.unwrap())):s instanceof E?E.create(s.items.map(e=>se(e))):s}function Pe(s,e){let t=N(s),r=N(e);if(s===e)return{valid:!0,data:s};if(t===f.object&&r===f.object){let n=_.objectKeys(e),a=_.objectKeys(s).filter(o=>n.indexOf(o)!==-1),i={...s,...e};for(let o of a){let l=Pe(s[o],e[o]);if(!l.valid)return{valid:!1};i[o]=l.data}return{valid:!0,data:i}}else if(t===f.array&&r===f.array){if(s.length!==e.length)return{valid:!1};let n=[];for(let a=0;a<s.length;a++){let i=s[a],o=e[a],l=Pe(i,o);if(!l.valid)return{valid:!1};n.push(l.data)}return{valid:!0,data:n}}else return t===f.date&&r===f.date&&+s==+e?{valid:!0,data:s}:{valid:!1}}function $e(s,e){return new Y({values:s,typeName:m.ZodEnum,...y(e)})}function Ee(s,e){let t=typeof s=="function"?s(e):typeof s=="string"?{message:s}:s;return typeof t=="string"?{message:t}:t}function Le(s,e={},t){return s?$.create().superRefine((r,n)=>{var a,i;let o=s(r);if(o instanceof Promise)return o.then(l=>{var c,h;if(!l){let k=Ee(e,r),F=(h=(c=k.fatal)!==null&&c!==void 0?c:t)!==null&&h!==void 0?h:!0;n.addIssue({code:"custom",...k,fatal:F})}});if(!o){let l=Ee(e,r),c=(i=(a=l.fatal)!==null&&a!==void 0?a:t)!==null&&i!==void 0?i:!0;n.addIssue({code:"custom",...l,fatal:c})}}):$.create()}var _,we,f,N,d,pt,I,ne,Oe,ge,mt,b,g,re,T,Ie,Ce,M,fe,p,le,ue,A,Se,v,gt,yt,vt,_t,kt,xt,bt,Tt,wt,Te,It,Ct,Pt,At,St,Et,De,Rt,Z,V,z,U,B,ae,W,G,$,D,S,ie,j,w,K,O,ve,J,E,_e,oe,de,ke,q,H,Y,X,L,C,P,R,Q,ee,ce,$t,pe,he,te,Lt,m,Ft,Fe,Me,Mt,Vt,Ve,zt,Ut,Bt,Wt,Gt,Kt,Jt,qt,Ht,Yt,Xt,Qt,es,ts,ss,rs,ns,as,is,os,ds,cs,ls,us,Re,fs,ps,hs,ms,gs,ys,vs,_s,ks,ze,Ue=x(()=>{(function(s){s.assertEqual=n=>n;function e(n){}s.assertIs=e;function t(n){throw new Error}s.assertNever=t,s.arrayToEnum=n=>{let a={};for(let i of n)a[i]=i;return a},s.getValidEnumValues=n=>{let a=s.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),i={};for(let o of a)i[o]=n[o];return s.objectValues(i)},s.objectValues=n=>s.objectKeys(n).map(function(a){return n[a]}),s.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let a=[];for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&a.push(i);return a},s.find=(n,a)=>{for(let i of n)if(a(i))return i},s.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function r(n,a=" | "){return n.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}s.joinValues=r,s.jsonStringifyReplacer=(n,a)=>typeof a=="bigint"?a.toString():a})(_||(_={}));(function(s){s.mergeShapes=(e,t)=>({...e,...t})})(we||(we={}));f=_.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),N=s=>{switch(typeof s){case"undefined":return f.undefined;case"string":return f.string;case"number":return isNaN(s)?f.nan:f.number;case"boolean":return f.boolean;case"function":return f.function;case"bigint":return f.bigint;case"symbol":return f.symbol;case"object":return Array.isArray(s)?f.array:s===null?f.null:s.then&&typeof s.then=="function"&&s.catch&&typeof s.catch=="function"?f.promise:typeof Map<"u"&&s instanceof Map?f.map:typeof Set<"u"&&s instanceof Set?f.set:typeof Date<"u"&&s instanceof Date?f.date:f.object;default:return f.unknown}},d=_.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),pt=s=>JSON.stringify(s,null,2).replace(/"([^"]+)":/g,"$1:"),I=class s extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(a){return a.message},r={_errors:[]},n=a=>{for(let i of a.issues)if(i.code==="invalid_union")i.unionErrors.map(n);else if(i.code==="invalid_return_type")n(i.returnTypeError);else if(i.code==="invalid_arguments")n(i.argumentsError);else if(i.path.length===0)r._errors.push(t(i));else{let o=r,l=0;for(;l<i.path.length;){let c=i.path[l];l===i.path.length-1?(o[c]=o[c]||{_errors:[]},o[c]._errors.push(t(i))):o[c]=o[c]||{_errors:[]},o=o[c],l++}}};return n(this),r}static assert(e){if(!(e instanceof s))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,_.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){let t={},r=[];for(let n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}};I.create=s=>new I(s);ne=(s,e)=>{let t;switch(s.code){case d.invalid_type:s.received===f.undefined?t="Required":t=`Expected ${s.expected}, received ${s.received}`;break;case d.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(s.expected,_.jsonStringifyReplacer)}`;break;case d.unrecognized_keys:t=`Unrecognized key(s) in object: ${_.joinValues(s.keys,", ")}`;break;case d.invalid_union:t="Invalid input";break;case d.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${_.joinValues(s.options)}`;break;case d.invalid_enum_value:t=`Invalid enum value. Expected ${_.joinValues(s.options)}, received '${s.received}'`;break;case d.invalid_arguments:t="Invalid function arguments";break;case d.invalid_return_type:t="Invalid function return type";break;case d.invalid_date:t="Invalid date";break;case d.invalid_string:typeof s.validation=="object"?"includes"in s.validation?(t=`Invalid input: must include "${s.validation.includes}"`,typeof s.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${s.validation.position}`)):"startsWith"in s.validation?t=`Invalid input: must start with "${s.validation.startsWith}"`:"endsWith"in s.validation?t=`Invalid input: must end with "${s.validation.endsWith}"`:_.assertNever(s.validation):s.validation!=="regex"?t=`Invalid ${s.validation}`:t="Invalid";break;case d.too_small:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at least":"more than"} ${s.minimum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at least":"over"} ${s.minimum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(s.minimum))}`:t="Invalid input";break;case d.too_big:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at most":"less than"} ${s.maximum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at most":"under"} ${s.maximum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="bigint"?t=`BigInt must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly":s.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(s.maximum))}`:t="Invalid input";break;case d.custom:t="Invalid input";break;case d.invalid_intersection_types:t="Intersection results could not be merged";break;case d.not_multiple_of:t=`Number must be a multiple of ${s.multipleOf}`;break;case d.not_finite:t="Number must be finite";break;default:t=e.defaultError,_.assertNever(s)}return{message:t}},Oe=ne;ge=s=>{let{data:e,path:t,errorMaps:r,issueData:n}=s,a=[...t,...n.path||[]],i={...n,path:a};if(n.message!==void 0)return{...n,path:a,message:n.message};let o="",l=r.filter(c=>!!c).slice().reverse();for(let c of l)o=c(i,{data:e,defaultError:o}).message;return{...n,path:a,message:o}},mt=[];b=class s{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let n of t){if(n.status==="aborted")return g;n.status==="dirty"&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let n of t){let a=await n.key,i=await n.value;r.push({key:a,value:i})}return s.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let n of t){let{key:a,value:i}=n;if(a.status==="aborted"||i.status==="aborted")return g;a.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof i.value<"u"||n.alwaysSet)&&(r[a.value]=i.value)}return{status:e.value,value:r}}},g=Object.freeze({status:"aborted"}),re=s=>({status:"dirty",value:s}),T=s=>({status:"valid",value:s}),Ie=s=>s.status==="aborted",Ce=s=>s.status==="dirty",M=s=>s.status==="valid",fe=s=>typeof Promise<"u"&&s instanceof Promise;(function(s){s.errToObj=e=>typeof e=="string"?{message:e}:e||{},s.toString=e=>typeof e=="string"?e:e?.message})(p||(p={}));A=class{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Se=(s,e)=>{if(M(e))return{success:!0,data:e.value};if(!s.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new I(s.common.issues);return this._error=t,this._error}}};v=class{get description(){return this._def.description}_getType(e){return N(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:N(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new b,ctx:{common:e.parent.common,data:e.data,parsedType:N(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(fe(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let n={common:{issues:[],async:(r=t?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:N(e)},a=this._parseSync({data:e,path:n.path,parent:n});return Se(n,a)}"~validate"(e){var t,r;let n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:N(e)};if(!this["~standard"].async)try{let a=this._parseSync({data:e,path:[],parent:n});return M(a)?{value:a.value}:{issues:n.common.issues}}catch(a){!((r=(t=a?.message)===null||t===void 0?void 0:t.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>M(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:N(e)},n=this._parse({data:e,path:r.path,parent:r}),a=await(fe(n)?n:Promise.resolve(n));return Se(r,a)}refine(e,t){let r=n=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(n):t;return this._refinement((n,a)=>{let i=e(n),o=()=>a.addIssue({code:d.custom,...r(n)});return typeof Promise<"u"&&i instanceof Promise?i.then(l=>l?!0:(o(),!1)):i?!0:(o(),!1)})}refinement(e,t){return this._refinement((r,n)=>e(r)?!0:(n.addIssue(typeof t=="function"?t(r,n):t),!1))}_refinement(e){return new C({schema:this,typeName:m.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return P.create(this,this._def)}nullable(){return R.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return j.create(this)}promise(){return L.create(this,this._def)}or(e){return K.create([this,e],this._def)}and(e){return J.create(this,e,this._def)}transform(e){return new C({...y(this._def),schema:this,typeName:m.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t=typeof e=="function"?e:()=>e;return new Q({...y(this._def),innerType:this,defaultValue:t,typeName:m.ZodDefault})}brand(){return new pe({typeName:m.ZodBranded,type:this,...y(this._def)})}catch(e){let t=typeof e=="function"?e:()=>e;return new ee({...y(this._def),innerType:this,catchValue:t,typeName:m.ZodCatch})}describe(e){let t=this.constructor;return new t({...this._def,description:e})}pipe(e){return he.create(this,e)}readonly(){return te.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},gt=/^c[^\s-]{8,}$/i,yt=/^[0-9a-z]+$/,vt=/^[0-9A-HJKMNP-TV-Z]{26}$/i,_t=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,kt=/^[a-z0-9_-]{21}$/i,xt=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,bt=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Tt=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,wt="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",It=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ct=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Pt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,At=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,St=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Et=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,De="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Rt=new RegExp(`^${De}$`);Z=class s extends v{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==f.string){let a=this._getOrReturnCtx(e);return u(a,{code:d.invalid_type,expected:f.string,received:a.parsedType}),g}let r=new b,n;for(let a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(n=this._getOrReturnCtx(e,n),u(n,{code:d.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(n=this._getOrReturnCtx(e,n),u(n,{code:d.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){let i=e.data.length>a.value,o=e.data.length<a.value;(i||o)&&(n=this._getOrReturnCtx(e,n),i?u(n,{code:d.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&u(n,{code:d.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")Tt.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"email",code:d.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")Te||(Te=new RegExp(wt,"u")),Te.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"emoji",code:d.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")_t.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"uuid",code:d.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")kt.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"nanoid",code:d.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")gt.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"cuid",code:d.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")yt.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"cuid2",code:d.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")vt.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"ulid",code:d.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),u(n,{validation:"url",code:d.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"regex",code:d.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(n=this._getOrReturnCtx(e,n),u(n,{code:d.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(n=this._getOrReturnCtx(e,n),u(n,{code:d.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(n=this._getOrReturnCtx(e,n),u(n,{code:d.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?Ze(a).test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{code:d.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?Rt.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{code:d.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?Ot(a).test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{code:d.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?bt.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"duration",code:d.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?Nt(e.data,a.version)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"ip",code:d.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?Dt(e.data,a.alg)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"jwt",code:d.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?jt(e.data,a.version)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"cidr",code:d.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?St.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"base64",code:d.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?Et.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"base64url",code:d.invalid_string,message:a.message}),r.dirty()):_.assertNever(a);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(n=>e.test(n),{validation:t,code:d.invalid_string,...p.errToObj(r)})}_addCheck(e){return new s({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...p.errToObj(e)})}url(e){return this._addCheck({kind:"url",...p.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...p.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...p.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...p.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...p.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...p.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...p.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...p.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...p.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...p.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...p.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...p.errToObj(e)})}datetime(e){var t,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...p.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...p.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...p.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...p.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...p.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...p.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...p.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...p.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...p.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...p.errToObj(t)})}nonempty(e){return this.min(1,p.errToObj(e))}trim(){return new s({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new s({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new s({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};Z.create=s=>{var e;return new Z({checks:[],typeName:m.ZodString,coerce:(e=s?.coerce)!==null&&e!==void 0?e:!1,...y(s)})};V=class s extends v{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==f.number){let a=this._getOrReturnCtx(e);return u(a,{code:d.invalid_type,expected:f.number,received:a.parsedType}),g}let r,n=new b;for(let a of this._def.checks)a.kind==="int"?_.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),u(r,{code:d.invalid_type,expected:"integer",received:"float",message:a.message}),n.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),u(r,{code:d.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),u(r,{code:d.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty()):a.kind==="multipleOf"?Zt(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),u(r,{code:d.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),u(r,{code:d.not_finite,message:a.message}),n.dirty()):_.assertNever(a);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,p.toString(t))}gt(e,t){return this.setLimit("min",e,!1,p.toString(t))}lte(e,t){return this.setLimit("max",e,!0,p.toString(t))}lt(e,t){return this.setLimit("max",e,!1,p.toString(t))}setLimit(e,t,r,n){return new s({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:p.toString(n)}]})}_addCheck(e){return new s({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:p.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:p.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:p.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:p.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:p.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:p.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:p.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:p.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:p.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&_.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}};V.create=s=>new V({checks:[],typeName:m.ZodNumber,coerce:s?.coerce||!1,...y(s)});z=class s extends v{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==f.bigint)return this._getInvalidInput(e);let r,n=new b;for(let a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),u(r,{code:d.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),u(r,{code:d.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),u(r,{code:d.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):_.assertNever(a);return{status:n.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return u(t,{code:d.invalid_type,expected:f.bigint,received:t.parsedType}),g}gte(e,t){return this.setLimit("min",e,!0,p.toString(t))}gt(e,t){return this.setLimit("min",e,!1,p.toString(t))}lte(e,t){return this.setLimit("max",e,!0,p.toString(t))}lt(e,t){return this.setLimit("max",e,!1,p.toString(t))}setLimit(e,t,r,n){return new s({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:p.toString(n)}]})}_addCheck(e){return new s({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:p.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:p.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:p.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:p.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:p.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};z.create=s=>{var e;return new z({checks:[],typeName:m.ZodBigInt,coerce:(e=s?.coerce)!==null&&e!==void 0?e:!1,...y(s)})};U=class extends v{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==f.boolean){let r=this._getOrReturnCtx(e);return u(r,{code:d.invalid_type,expected:f.boolean,received:r.parsedType}),g}return T(e.data)}};U.create=s=>new U({typeName:m.ZodBoolean,coerce:s?.coerce||!1,...y(s)});B=class s extends v{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==f.date){let a=this._getOrReturnCtx(e);return u(a,{code:d.invalid_type,expected:f.date,received:a.parsedType}),g}if(isNaN(e.data.getTime())){let a=this._getOrReturnCtx(e);return u(a,{code:d.invalid_date}),g}let r=new b,n;for(let a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(n=this._getOrReturnCtx(e,n),u(n,{code:d.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(n=this._getOrReturnCtx(e,n),u(n,{code:d.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):_.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new s({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:p.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:p.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}};B.create=s=>new B({checks:[],coerce:s?.coerce||!1,typeName:m.ZodDate,...y(s)});ae=class extends v{_parse(e){if(this._getType(e)!==f.symbol){let r=this._getOrReturnCtx(e);return u(r,{code:d.invalid_type,expected:f.symbol,received:r.parsedType}),g}return T(e.data)}};ae.create=s=>new ae({typeName:m.ZodSymbol,...y(s)});W=class extends v{_parse(e){if(this._getType(e)!==f.undefined){let r=this._getOrReturnCtx(e);return u(r,{code:d.invalid_type,expected:f.undefined,received:r.parsedType}),g}return T(e.data)}};W.create=s=>new W({typeName:m.ZodUndefined,...y(s)});G=class extends v{_parse(e){if(this._getType(e)!==f.null){let r=this._getOrReturnCtx(e);return u(r,{code:d.invalid_type,expected:f.null,received:r.parsedType}),g}return T(e.data)}};G.create=s=>new G({typeName:m.ZodNull,...y(s)});$=class extends v{constructor(){super(...arguments),this._any=!0}_parse(e){return T(e.data)}};$.create=s=>new $({typeName:m.ZodAny,...y(s)});D=class extends v{constructor(){super(...arguments),this._unknown=!0}_parse(e){return T(e.data)}};D.create=s=>new D({typeName:m.ZodUnknown,...y(s)});S=class extends v{_parse(e){let t=this._getOrReturnCtx(e);return u(t,{code:d.invalid_type,expected:f.never,received:t.parsedType}),g}};S.create=s=>new S({typeName:m.ZodNever,...y(s)});ie=class extends v{_parse(e){if(this._getType(e)!==f.undefined){let r=this._getOrReturnCtx(e);return u(r,{code:d.invalid_type,expected:f.void,received:r.parsedType}),g}return T(e.data)}};ie.create=s=>new ie({typeName:m.ZodVoid,...y(s)});j=class s extends v{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==f.array)return u(t,{code:d.invalid_type,expected:f.array,received:t.parsedType}),g;if(n.exactLength!==null){let i=t.data.length>n.exactLength.value,o=t.data.length<n.exactLength.value;(i||o)&&(u(t,{code:i?d.too_big:d.too_small,minimum:o?n.exactLength.value:void 0,maximum:i?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(n.minLength!==null&&t.data.length<n.minLength.value&&(u(t,{code:d.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),n.maxLength!==null&&t.data.length>n.maxLength.value&&(u(t,{code:d.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((i,o)=>n.type._parseAsync(new A(t,i,t.path,o)))).then(i=>b.mergeArray(r,i));let a=[...t.data].map((i,o)=>n.type._parseSync(new A(t,i,t.path,o)));return b.mergeArray(r,a)}get element(){return this._def.type}min(e,t){return new s({...this._def,minLength:{value:e,message:p.toString(t)}})}max(e,t){return new s({...this._def,maxLength:{value:e,message:p.toString(t)}})}length(e,t){return new s({...this._def,exactLength:{value:e,message:p.toString(t)}})}nonempty(e){return this.min(1,e)}};j.create=(s,e)=>new j({type:s,minLength:null,maxLength:null,exactLength:null,typeName:m.ZodArray,...y(e)});w=class s extends v{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),t=_.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==f.object){let c=this._getOrReturnCtx(e);return u(c,{code:d.invalid_type,expected:f.object,received:c.parsedType}),g}let{status:r,ctx:n}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof S&&this._def.unknownKeys==="strip"))for(let c in n.data)i.includes(c)||o.push(c);let l=[];for(let c of i){let h=a[c],k=n.data[c];l.push({key:{status:"valid",value:c},value:h._parse(new A(n,k,n.path,c)),alwaysSet:c in n.data})}if(this._def.catchall instanceof S){let c=this._def.unknownKeys;if(c==="passthrough")for(let h of o)l.push({key:{status:"valid",value:h},value:{status:"valid",value:n.data[h]}});else if(c==="strict")o.length>0&&(u(n,{code:d.unrecognized_keys,keys:o}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let c=this._def.catchall;for(let h of o){let k=n.data[h];l.push({key:{status:"valid",value:h},value:c._parse(new A(n,k,n.path,h)),alwaysSet:h in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let c=[];for(let h of l){let k=await h.key,F=await h.value;c.push({key:k,value:F,alwaysSet:h.alwaysSet})}return c}).then(c=>b.mergeObjectSync(r,c)):b.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return p.errToObj,new s({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var n,a,i,o;let l=(i=(a=(n=this._def).errorMap)===null||a===void 0?void 0:a.call(n,t,r).message)!==null&&i!==void 0?i:r.defaultError;return t.code==="unrecognized_keys"?{message:(o=p.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new s({...this._def,unknownKeys:"strip"})}passthrough(){return new s({...this._def,unknownKeys:"passthrough"})}extend(e){return new s({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new s({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:m.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new s({...this._def,catchall:e})}pick(e){let t={};return _.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new s({...this._def,shape:()=>t})}omit(e){let t={};return _.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new s({...this._def,shape:()=>t})}deepPartial(){return se(this)}partial(e){let t={};return _.objectKeys(this.shape).forEach(r=>{let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}),new s({...this._def,shape:()=>t})}required(e){let t={};return _.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof P;)a=a._def.innerType;t[r]=a}}),new s({...this._def,shape:()=>t})}keyof(){return $e(_.objectKeys(this.shape))}};w.create=(s,e)=>new w({shape:()=>s,unknownKeys:"strip",catchall:S.create(),typeName:m.ZodObject,...y(e)});w.strictCreate=(s,e)=>new w({shape:()=>s,unknownKeys:"strict",catchall:S.create(),typeName:m.ZodObject,...y(e)});w.lazycreate=(s,e)=>new w({shape:s,unknownKeys:"strip",catchall:S.create(),typeName:m.ZodObject,...y(e)});K=class extends v{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;function n(a){for(let o of a)if(o.result.status==="valid")return o.result;for(let o of a)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;let i=a.map(o=>new I(o.ctx.common.issues));return u(t,{code:d.invalid_union,unionErrors:i}),g}if(t.common.async)return Promise.all(r.map(async a=>{let i={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(n);{let a,i=[];for(let l of r){let c={...t,common:{...t.common,issues:[]},parent:null},h=l._parseSync({data:t.data,path:t.path,parent:c});if(h.status==="valid")return h;h.status==="dirty"&&!a&&(a={result:h,ctx:c}),c.common.issues.length&&i.push(c.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;let o=i.map(l=>new I(l));return u(t,{code:d.invalid_union,unionErrors:o}),g}}get options(){return this._def.options}};K.create=(s,e)=>new K({options:s,typeName:m.ZodUnion,...y(e)});O=s=>s instanceof q?O(s.schema):s instanceof C?O(s.innerType()):s instanceof H?[s.value]:s instanceof Y?s.options:s instanceof X?_.objectValues(s.enum):s instanceof Q?O(s._def.innerType):s instanceof W?[void 0]:s instanceof G?[null]:s instanceof P?[void 0,...O(s.unwrap())]:s instanceof R?[null,...O(s.unwrap())]:s instanceof pe||s instanceof te?O(s.unwrap()):s instanceof ee?O(s._def.innerType):[],ve=class s extends v{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==f.object)return u(t,{code:d.invalid_type,expected:f.object,received:t.parsedType}),g;let r=this.discriminator,n=t.data[r],a=this.optionsMap.get(n);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(u(t,{code:d.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),g)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let a of t){let i=O(a.shape[e]);if(!i.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of i){if(n.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);n.set(o,a)}}return new s({typeName:m.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...y(r)})}};J=class extends v{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=(a,i)=>{if(Ie(a)||Ie(i))return g;let o=Pe(a.value,i.value);return o.valid?((Ce(a)||Ce(i))&&t.dirty(),{status:t.value,value:o.data}):(u(r,{code:d.invalid_intersection_types}),g)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,i])=>n(a,i)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};J.create=(s,e,t)=>new J({left:s,right:e,typeName:m.ZodIntersection,...y(t)});E=class s extends v{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.array)return u(r,{code:d.invalid_type,expected:f.array,received:r.parsedType}),g;if(r.data.length<this._def.items.length)return u(r,{code:d.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),g;!this._def.rest&&r.data.length>this._def.items.length&&(u(r,{code:d.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let a=[...r.data].map((i,o)=>{let l=this._def.items[o]||this._def.rest;return l?l._parse(new A(r,i,r.path,o)):null}).filter(i=>!!i);return r.common.async?Promise.all(a).then(i=>b.mergeArray(t,i)):b.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new s({...this._def,rest:e})}};E.create=(s,e)=>{if(!Array.isArray(s))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new E({items:s,typeName:m.ZodTuple,rest:null,...y(e)})};_e=class s extends v{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.object)return u(r,{code:d.invalid_type,expected:f.object,received:r.parsedType}),g;let n=[],a=this._def.keyType,i=this._def.valueType;for(let o in r.data)n.push({key:a._parse(new A(r,o,r.path,o)),value:i._parse(new A(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?b.mergeObjectAsync(t,n):b.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof v?new s({keyType:e,valueType:t,typeName:m.ZodRecord,...y(r)}):new s({keyType:Z.create(),valueType:e,typeName:m.ZodRecord,...y(t)})}},oe=class extends v{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.map)return u(r,{code:d.invalid_type,expected:f.map,received:r.parsedType}),g;let n=this._def.keyType,a=this._def.valueType,i=[...r.data.entries()].map(([o,l],c)=>({key:n._parse(new A(r,o,r.path,[c,"key"])),value:a._parse(new A(r,l,r.path,[c,"value"]))}));if(r.common.async){let o=new Map;return Promise.resolve().then(async()=>{for(let l of i){let c=await l.key,h=await l.value;if(c.status==="aborted"||h.status==="aborted")return g;(c.status==="dirty"||h.status==="dirty")&&t.dirty(),o.set(c.value,h.value)}return{status:t.value,value:o}})}else{let o=new Map;for(let l of i){let c=l.key,h=l.value;if(c.status==="aborted"||h.status==="aborted")return g;(c.status==="dirty"||h.status==="dirty")&&t.dirty(),o.set(c.value,h.value)}return{status:t.value,value:o}}}};oe.create=(s,e,t)=>new oe({valueType:e,keyType:s,typeName:m.ZodMap,...y(t)});de=class s extends v{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.set)return u(r,{code:d.invalid_type,expected:f.set,received:r.parsedType}),g;let n=this._def;n.minSize!==null&&r.data.size<n.minSize.value&&(u(r,{code:d.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),n.maxSize!==null&&r.data.size>n.maxSize.value&&(u(r,{code:d.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let a=this._def.valueType;function i(l){let c=new Set;for(let h of l){if(h.status==="aborted")return g;h.status==="dirty"&&t.dirty(),c.add(h.value)}return{status:t.value,value:c}}let o=[...r.data.values()].map((l,c)=>a._parse(new A(r,l,r.path,c)));return r.common.async?Promise.all(o).then(l=>i(l)):i(o)}min(e,t){return new s({...this._def,minSize:{value:e,message:p.toString(t)}})}max(e,t){return new s({...this._def,maxSize:{value:e,message:p.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};de.create=(s,e)=>new de({valueType:s,minSize:null,maxSize:null,typeName:m.ZodSet,...y(e)});ke=class s extends v{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==f.function)return u(t,{code:d.invalid_type,expected:f.function,received:t.parsedType}),g;function r(o,l){return ge({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,me(),ne].filter(c=>!!c),issueData:{code:d.invalid_arguments,argumentsError:l}})}function n(o,l){return ge({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,me(),ne].filter(c=>!!c),issueData:{code:d.invalid_return_type,returnTypeError:l}})}let a={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof L){let o=this;return T(async function(...l){let c=new I([]),h=await o._def.args.parseAsync(l,a).catch(be=>{throw c.addIssue(r(l,be)),c}),k=await Reflect.apply(i,this,h);return await o._def.returns._def.type.parseAsync(k,a).catch(be=>{throw c.addIssue(n(k,be)),c})})}else{let o=this;return T(function(...l){let c=o._def.args.safeParse(l,a);if(!c.success)throw new I([r(l,c.error)]);let h=Reflect.apply(i,this,c.data),k=o._def.returns.safeParse(h,a);if(!k.success)throw new I([n(h,k.error)]);return k.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new s({...this._def,args:E.create(e).rest(D.create())})}returns(e){return new s({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new s({args:e||E.create([]).rest(D.create()),returns:t||D.create(),typeName:m.ZodFunction,...y(r)})}},q=class extends v{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};q.create=(s,e)=>new q({getter:s,typeName:m.ZodLazy,...y(e)});H=class extends v{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return u(t,{received:t.data,code:d.invalid_literal,expected:this._def.value}),g}return{status:"valid",value:e.data}}get value(){return this._def.value}};H.create=(s,e)=>new H({value:s,typeName:m.ZodLiteral,...y(e)});Y=class s extends v{constructor(){super(...arguments),le.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let t=this._getOrReturnCtx(e),r=this._def.values;return u(t,{expected:_.joinValues(r),received:t.parsedType,code:d.invalid_type}),g}if(ye(this,le,"f")||Ne(this,le,new Set(this._def.values),"f"),!ye(this,le,"f").has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return u(t,{received:t.data,code:d.invalid_enum_value,options:r}),g}return T(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return s.create(e,{...this._def,...t})}exclude(e,t=this._def){return s.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}};le=new WeakMap;Y.create=$e;X=class extends v{constructor(){super(...arguments),ue.set(this,void 0)}_parse(e){let t=_.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==f.string&&r.parsedType!==f.number){let n=_.objectValues(t);return u(r,{expected:_.joinValues(n),received:r.parsedType,code:d.invalid_type}),g}if(ye(this,ue,"f")||Ne(this,ue,new Set(_.getValidEnumValues(this._def.values)),"f"),!ye(this,ue,"f").has(e.data)){let n=_.objectValues(t);return u(r,{received:r.data,code:d.invalid_enum_value,options:n}),g}return T(e.data)}get enum(){return this._def.values}};ue=new WeakMap;X.create=(s,e)=>new X({values:s,typeName:m.ZodNativeEnum,...y(e)});L=class extends v{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==f.promise&&t.common.async===!1)return u(t,{code:d.invalid_type,expected:f.promise,received:t.parsedType}),g;let r=t.parsedType===f.promise?t.data:Promise.resolve(t.data);return T(r.then(n=>this._def.type.parseAsync(n,{path:t.path,errorMap:t.common.contextualErrorMap})))}};L.create=(s,e)=>new L({type:s,typeName:m.ZodPromise,...y(e)});C=class extends v{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===m.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,a={addIssue:i=>{u(r,i),i.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),n.type==="preprocess"){let i=n.transform(r.data,a);if(r.common.async)return Promise.resolve(i).then(async o=>{if(t.value==="aborted")return g;let l=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return l.status==="aborted"?g:l.status==="dirty"||t.value==="dirty"?re(l.value):l});{if(t.value==="aborted")return g;let o=this._def.schema._parseSync({data:i,path:r.path,parent:r});return o.status==="aborted"?g:o.status==="dirty"||t.value==="dirty"?re(o.value):o}}if(n.type==="refinement"){let i=o=>{let l=n.refinement(o,a);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){let o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?g:(o.status==="dirty"&&t.dirty(),i(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?g:(o.status==="dirty"&&t.dirty(),i(o.value).then(()=>({status:t.value,value:o.value}))))}if(n.type==="transform")if(r.common.async===!1){let i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!M(i))return i;let o=n.transform(i.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>M(i)?Promise.resolve(n.transform(i.value,a)).then(o=>({status:t.value,value:o})):i);_.assertNever(n)}};C.create=(s,e,t)=>new C({schema:s,typeName:m.ZodEffects,effect:e,...y(t)});C.createWithPreprocess=(s,e,t)=>new C({schema:e,effect:{type:"preprocess",transform:s},typeName:m.ZodEffects,...y(t)});P=class extends v{_parse(e){return this._getType(e)===f.undefined?T(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};P.create=(s,e)=>new P({innerType:s,typeName:m.ZodOptional,...y(e)});R=class extends v{_parse(e){return this._getType(e)===f.null?T(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};R.create=(s,e)=>new R({innerType:s,typeName:m.ZodNullable,...y(e)});Q=class extends v{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===f.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};Q.create=(s,e)=>new Q({innerType:s,typeName:m.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...y(e)});ee=class extends v{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return fe(n)?n.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new I(r.common.issues)},input:r.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new I(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};ee.create=(s,e)=>new ee({innerType:s,typeName:m.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...y(e)});ce=class extends v{_parse(e){if(this._getType(e)!==f.nan){let r=this._getOrReturnCtx(e);return u(r,{code:d.invalid_type,expected:f.nan,received:r.parsedType}),g}return{status:"valid",value:e.data}}};ce.create=s=>new ce({typeName:m.ZodNaN,...y(s)});$t=Symbol("zod_brand"),pe=class extends v{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}},he=class s extends v{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?g:a.status==="dirty"?(t.dirty(),re(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{let n=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return n.status==="aborted"?g:n.status==="dirty"?(t.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:r.path,parent:r})}}static create(e,t){return new s({in:e,out:t,typeName:m.ZodPipeline})}},te=class extends v{_parse(e){let t=this._def.innerType._parse(e),r=n=>(M(n)&&(n.value=Object.freeze(n.value)),n);return fe(t)?t.then(n=>r(n)):r(t)}unwrap(){return this._def.innerType}};te.create=(s,e)=>new te({innerType:s,typeName:m.ZodReadonly,...y(e)});Lt={object:w.lazycreate};(function(s){s.ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly"})(m||(m={}));Ft=(s,e={message:`Input not instance of ${s.name}`})=>Le(t=>t instanceof s,e),Fe=Z.create,Me=V.create,Mt=ce.create,Vt=z.create,Ve=U.create,zt=B.create,Ut=ae.create,Bt=W.create,Wt=G.create,Gt=$.create,Kt=D.create,Jt=S.create,qt=ie.create,Ht=j.create,Yt=w.create,Xt=w.strictCreate,Qt=K.create,es=ve.create,ts=J.create,ss=E.create,rs=_e.create,ns=oe.create,as=de.create,is=ke.create,os=q.create,ds=H.create,cs=Y.create,ls=X.create,us=L.create,Re=C.create,fs=P.create,ps=R.create,hs=C.createWithPreprocess,ms=he.create,gs=()=>Fe().optional(),ys=()=>Me().optional(),vs=()=>Ve().optional(),_s={string:s=>Z.create({...s,coerce:!0}),number:s=>V.create({...s,coerce:!0}),boolean:s=>U.create({...s,coerce:!0}),bigint:s=>z.create({...s,coerce:!0}),date:s=>B.create({...s,coerce:!0})},ks=g,ze=Object.freeze({__proto__:null,defaultErrorMap:ne,setErrorMap:ht,getErrorMap:me,makeIssue:ge,EMPTY_PATH:mt,addIssueToContext:u,ParseStatus:b,INVALID:g,DIRTY:re,OK:T,isAborted:Ie,isDirty:Ce,isValid:M,isAsync:fe,get util(){return _},get objectUtil(){return we},ZodParsedType:f,getParsedType:N,ZodType:v,datetimeRegex:Ze,ZodString:Z,ZodNumber:V,ZodBigInt:z,ZodBoolean:U,ZodDate:B,ZodSymbol:ae,ZodUndefined:W,ZodNull:G,ZodAny:$,ZodUnknown:D,ZodNever:S,ZodVoid:ie,ZodArray:j,ZodObject:w,ZodUnion:K,ZodDiscriminatedUnion:ve,ZodIntersection:J,ZodTuple:E,ZodRecord:_e,ZodMap:oe,ZodSet:de,ZodFunction:ke,ZodLazy:q,ZodLiteral:H,ZodEnum:Y,ZodNativeEnum:X,ZodPromise:L,ZodEffects:C,ZodTransformer:C,ZodOptional:P,ZodNullable:R,ZodDefault:Q,ZodCatch:ee,ZodNaN:ce,BRAND:$t,ZodBranded:pe,ZodPipeline:he,ZodReadonly:te,custom:Le,Schema:v,ZodSchema:v,late:Lt,get ZodFirstPartyTypeKind(){return m},coerce:_s,any:Gt,array:Ht,bigint:Vt,boolean:Ve,date:zt,discriminatedUnion:es,effect:Re,enum:cs,function:is,instanceof:Ft,intersection:ts,lazy:os,literal:ds,map:ns,nan:Mt,nativeEnum:ls,never:Jt,null:Wt,nullable:ps,number:Me,object:Yt,oboolean:vs,onumber:ys,optional:fs,ostring:gs,pipeline:ms,preprocess:hs,promise:us,record:rs,set:as,strictObject:Xt,string:Fe,symbol:Ut,transformer:Re,tuple:ss,undefined:Bt,union:Qt,unknown:Kt,void:qt,NEVER:ks,ZodIssueCode:d,quotelessJson:pt,ZodError:I})});var Is,Be=x(()=>{"use strict";Ue();Is=ze.string().regex(/^0x[a-fA-F0-9]{40}$/,"Invalid Ethereum address format")});var We=x(()=>{"use strict"});var Ge,Ke=x(()=>{"use strict";Ge=async(s,e,t,r)=>{console.log(`Fetching tool policy from PKP Tool Registry: ${s.address}...`,`PKP Token ID: ${e}`,`Delegatee Address: ${t}`,`Tool IPFS CID: ${r}`);let n=(await s.getToolPoliciesForDelegatees(e,[r],[t]))[0];return console.log("Tool Policy:",`Tool IPFS CID: ${n.toolIpfsCid}`,`Policy IPFS CID: ${n.policyIpfsCid}`,`Delegatee Address: ${n.delegatee}`,`Policy Enabled: ${n.enabled}`),n}});var xe,Ae=x(()=>{"use strict";xe={"datil-dev":{pubkeyRouterAddress:"0xbc01f21C58Ca83f25b09338401D53D4c2344D1d9"},"datil-test":{pubkeyRouterAddress:"0x65C3d057aef28175AfaC61a74cc6b27E88405583"},datil:{pubkeyRouterAddress:"0xF182d6bEf16Ba77e69372dD096D8B70Bc3d5B475"}}});var Je,qe=x(()=>{"use strict";Ae();Je=async s=>{console.log("Getting PKP info from PubkeyRouter...");let e=xe["datil-test"];if(!e)throw new Error("Unsupported Lit network: datil-test");let t=["function ethAddressToPkpId(address ethAddress) public view returns (uint256)","function getPubkey(uint256 tokenId) public view returns (bytes memory)"],r=new ethers.Contract(e.pubkeyRouterAddress,t,new ethers.providers.JsonRpcProvider(await Lit.Actions.getRpcUrl({chain:"yellowstone"})));console.log(`Getting PKP ID for eth address ${s}...`);let n=await r.ethAddressToPkpId(s);console.log(`Got PKP token ID: ${n}`),console.log(`Getting public key for PKP ID ${n}...`);let a=await r.getPubkey(n);return console.log(`Got public key: ${a}`),{tokenId:n.toString(),ethAddress:s,publicKey:a}}});var He,Ye=x(()=>{"use strict";He=async s=>{let e=["function registerTools(uint256 pkpTokenId, string[] calldata toolIpfsCids, bool enabled) external","function removeTools(uint256 pkpTokenId, string[] calldata toolIpfsCids) external","function enableTools(uint256 pkpTokenId, string[] calldata toolIpfsCids) external","function disableTools(uint256 pkpTokenId, string[] calldata toolIpfsCids) external","function permitToolsForDelegatees(uint256 pkpTokenId, string[] calldata toolIpfsCids, address[] calldata delegatees) external","function unpermitToolsForDelegatees(uint256 pkpTokenId, string[] calldata toolIpfsCids, address[] calldata delegatees) external","function getRegisteredTools(uint256 pkpTokenId, string[] calldata toolIpfsCids) external view returns (tuple(string toolIpfsCid, bool toolEnabled)[] memory toolsInfo)","function getAllRegisteredTools(uint256 pkpTokenId) external view returns (tuple(string toolIpfsCid, bool toolEnabled)[] memory toolsInfo)","function getRegisteredToolsAndDelegatees(uint256 pkpTokenId, string[] calldata toolIpfsCids) external view returns (tuple(string toolIpfsCid, bool toolEnabled, address[] delegatees, string[] delegateesPolicyIpfsCids, bool[] delegateesPolicyEnabled) memory toolInfo)","function getAllRegisteredToolsAndDelegatees(uint256 pkpTokenId) external view returns (tuple(string toolIpfsCid, bool toolEnabled, address[] delegatees, string[] delegateesPolicyIpfsCids, bool[] delegateesPolicyEnabled)[] memory toolsInfo)","function getToolsWithPolicy(uint256 pkpTokenId) external view returns (tuple(string toolIpfsCid, bool toolEnabled, address[] delegatees, string[] delegateesPolicyIpfsCids, bool[] delegateesPolicyEnabled)[] memory toolsInfo)","function getToolsWithoutPolicy(uint256 pkpTokenId) external view returns (tuple(string toolIpfsCid, bool toolEnabled, address[] delegatees)[] memory toolsWithoutPolicy)","function isToolRegistered(uint256 pkpTokenId, string calldata toolIpfsCid) external view returns (bool isRegistered, bool isEnabled)","function isToolPermittedForDelegatee(uint256 pkpTokenId, string calldata toolIpfsCid, address delegatee) external view returns (bool isPermitted, bool isEnabled)","function getPermittedToolsForDelegatee(uint256 pkpTokenId, address delegatee) external view returns (tuple(string toolIpfsCid, bool toolEnabled, address delegatee, string policyIpfsCid, bool policyEnabled)[] memory permittedTools)","function addDelegatees(uint256 pkpTokenId, address[] calldata delegatees) external","function removeDelegatees(uint256 pkpTokenId, address[] calldata delegatees) external","function getDelegatees(uint256 pkpTokenId) external view returns (address[] memory)","function getDelegatedPkps(address delegatee) external view returns (uint256[] memory)","function isPkpDelegatee(uint256 pkpTokenId, address delegatee) external view returns (bool)","function getToolPoliciesForDelegatees(uint256 pkpTokenId, string[] calldata toolIpfsCids, address[] calldata delegatees) external view returns (tuple(string toolIpfsCid, string policyIpfsCid, address delegatee, bool enabled)[] memory toolPolicies)","function setToolPoliciesForDelegatees(uint256 pkpTokenId, string[] calldata toolIpfsCids, address[] calldata delegatees, string[] calldata policyIpfsCids, bool enablePolicies) external","function removeToolPoliciesForDelegatees(uint256 pkpTokenId, string[] calldata toolIpfsCids, address[] calldata delegatees) external","function enableToolPoliciesForDelegatees(uint256 pkpTokenId, string[] calldata toolIpfsCids, address[] calldata delegatees) external","function disableToolPoliciesForDelegatees(uint256 pkpTokenId, string[] calldata toolIpfsCids, address[] calldata delegatees) external","function getToolPolicyParameters(uint256 pkpTokenId, string calldata toolIpfsCid, address delegatee, string[] calldata parameterNames) external view returns (tuple(string name, bytes value)[] memory parameters)","function getAllToolPolicyParameters(uint256 pkpTokenId, string calldata toolIpfsCid, address delegatee) external view returns (tuple(string name, bytes value)[] memory parameters)","function setToolPolicyParametersForDelegatee(uint256 pkpTokenId, string calldata toolIpfsCid, address delegatee, string[] calldata parameterNames, bytes[] calldata parameterValues) external","function removeToolPolicyParametersForDelegatee(uint256 pkpTokenId, string calldata toolIpfsCid, address delegatee, string[] calldata parameterNames) external","error InvalidDelegatee()","error EmptyDelegatees()","error DelegateeAlreadyExists(uint256 pkpTokenId, address delegatee)","error DelegateeNotFound(uint256 pkpTokenId, address delegatee)","error EmptyIPFSCID()","error ToolNotFound(string toolIpfsCid)","error ToolAlreadyRegistered(string toolIpfsCid)","error ArrayLengthMismatch()","error InvalidPolicyParameters()","error PolicyParameterAlreadySet(string parameterName)","error InvalidPolicyValue()","error NoPolicySet(uint256 pkpTokenId, string toolIpfsCid, address delegatee)","error PolicyAlreadySet(uint256 pkpTokenId, string toolIpfsCid, address delegatee)","error PolicySameEnabledState(uint256 pkpTokenId, string toolIpfsCid, address delegatee)","error EmptyPolicyIPFSCID()","error NotPKPOwner()","event ToolsRegistered(uint256 indexed pkpTokenId, bool enabled, string[] toolIpfsCids)","event ToolsRemoved(uint256 indexed pkpTokenId, string[] toolIpfsCids)","event ToolsEnabled(uint256 indexed pkpTokenId, string[] toolIpfsCids)","event ToolsDisabled(uint256 indexed pkpTokenId, string[] toolIpfsCids)","event ToolsPermitted(uint256 indexed pkpTokenId, string[] toolIpfsCids, address[] delegatees)","event AddedDelegatees(uint256 indexed pkpTokenId, address[] delegatees)","event RemovedDelegatees(uint256 indexed pkpTokenId, address[] delegatees)","event ToolPoliciesSet(uint256 indexed pkpTokenId, string[] toolIpfsCids, address[] delegatees, string[] policyIpfsCids)","event ToolPoliciesRemoved(uint256 indexed pkpTokenId, string[] toolIpfsCids, address[] delegatees)","event PoliciesEnabled(uint256 indexed pkpTokenId, string[] toolIpfsCids, address[] delegatees)","event PoliciesDisabled(uint256 indexed pkpTokenId, string[] toolIpfsCids, address[] delegatees)","event PolicyParametersSet(uint256 indexed pkpTokenId, string toolIpfsCids, address delegatee, string[] parameterNames, bytes[] parameterValues)","event PolicyParametersRemoved(uint256 indexed pkpTokenId, string toolIpfsCids, address delegatee, string[] parameterNames)","event ToolsUnpermitted(uint256 indexed pkpTokenId, string[] toolIpfsCids, address[] delegatees)"];return new ethers.Contract(s,e,new ethers.providers.JsonRpcProvider(await Lit.Actions.getRpcUrl({chain:"yellowstone"})))}});var Xe=x(()=>{"use strict"});var Qe=x(()=>{"use strict"});var et=x(()=>{"use strict";We();Ke();qe();Ye();Xe();Ae();Qe()});var tt=x(()=>{"use strict";Be();et()});async function st(s,e,t){console.log("Getting token info for:",e);try{console.log("Validating token address..."),ethers.utils.getAddress(params.tokenIn)}catch{throw new Error(`Invalid token address: ${params.tokenIn}`)}if(console.log("Checking if contract exists..."),await s.getCode(e)==="0x")throw new Error(`No contract found at address: ${e}`);let n=new ethers.utils.Interface(["function decimals() view returns (uint8)","function balanceOf(address account) view returns (uint256)","function transfer(address to, uint256 amount) external returns (bool)"]);console.log("Creating token contract instance...");let a=new ethers.Contract(params.tokenIn,n,s);console.log("Fetching token decimals and balance...");try{let i=await a.decimals();console.log("Token decimals:",i);let o=ethers.utils.parseUnits(params.amountIn,i);console.log("Amount to send:",o.toString());let l=await a.balanceOf(t);if(console.log("PKP balance:",l.toString()),o.gt(l))throw new Error(`Insufficient balance. PKP balance: ${ethers.utils.formatUnits(l,i)}. Required: ${ethers.utils.formatUnits(o,i)}`);return{decimals:i,pkpBalance:l,amount:o}}catch(i){throw console.error("Error getting token info:",i),new Error(`Failed to interact with token contract at ${params.tokenIn}. Make sure this is a valid ERC20 token contract.`)}}var rt=x(()=>{"use strict"});var nt,at=x(()=>{"use strict";nt=async(s,e)=>{console.log("Getting gas data...");let t=await Lit.Actions.runOnce({waitForResponse:!0,name:"gasPriceGetter"},async()=>{let r=await s.send("eth_feeHistory",["0x1","latest",[]]),n=ethers.BigNumber.from(r.baseFeePerGas[0]),a=await s.getTransactionCount(e),i=n.div(4),o=n.mul(2);return JSON.stringify({maxFeePerGas:o.toHexString(),maxPriorityFeePerGas:i.toHexString(),nonce:a})});return console.log(`Gas data: ${t}`),JSON.parse(t)}});var it,ot=x(()=>{"use strict";it=async(s,e,t)=>{console.log("Estimating gas limit...");let r=new ethers.utils.Interface(["function transfer(address to, uint256 amount) external returns (bool)"]),n=new ethers.Contract(params.tokenIn,r,s);try{let a=await n.estimateGas.transfer(params.recipientAddress,e,{from:t});return console.log("Estimated gas limit:",a.toString()),a.mul(120).div(100)}catch(a){return console.error("Could not estimate gas. Using fallback gas limit of 100000.",a),ethers.BigNumber.from("100000")}}});var dt,ct=x(()=>{"use strict";dt=async(s,e,t,r,n,a,i)=>{console.log("Creating and signing transaction...");let o=new ethers.utils.Interface(["function transfer(address to, uint256 amount) external returns (bool)"]),l={to:s,data:o.encodeFunctionData("transfer",[e,t]),value:"0x0",gasLimit:r.toHexString(),maxFeePerGas:n.maxFeePerGas,maxPriorityFeePerGas:n.maxPriorityFeePerGas,nonce:n.nonce,chainId:a,type:2};console.log(`Signing transfer with PKP public key: ${i}...`);let c=await Lit.Actions.signAndCombineEcdsa({toSign:ethers.utils.arrayify(ethers.utils.keccak256(ethers.utils.serializeTransaction(l))),publicKey:i.startsWith("0x")?i.slice(2):i,sigName:"erc20TransferSig"});return console.log("Transaction signed"),ethers.utils.serializeTransaction(l,ethers.utils.joinSignature({r:"0x"+JSON.parse(c).r.substring(2),s:"0x"+JSON.parse(c).s,v:JSON.parse(c).v}))}});var lt,ut=x(()=>{"use strict";lt=async(s,e)=>(console.log("Broadcasting transfer..."),await Lit.Actions.runOnce({waitForResponse:!0,name:"txnSender"},async()=>{try{let t=await s.sendTransaction(e);console.log("Transaction sent:",t.hash);let r=await t.wait(1);return console.log("Transaction mined:",r.transactionHash),r.transactionHash}catch(t){console.error("Full error object:",JSON.stringify(t,null,2));let r={message:t.message,code:t.code,reason:t.reason,error:t.error,...t.transaction&&{transaction:t.transaction},...t.receipt&&{receipt:t.receipt}};return console.error("Error details:",JSON.stringify(r,null,2)),JSON.stringify({error:!0,message:t.reason||t.message||"Transaction failed",details:r})}}))});var xs=ft(()=>{tt();rt();at();ot();ct();ut();(async()=>{try{console.log("Using Lit Network: datil-test"),console.log("Using PKP Tool Registry Address: 0x525bF2bEb622D7C05E979a8b3fFcDBBEF944450E"),console.log(`Using Pubkey Router Address: ${xe["datil-test"].pubkeyRouterAddress}`);let s=ethers.utils.getAddress(LitAuth.authSigAddress),e=LitAuth.actionIpfsIds[0],t=new ethers.providers.JsonRpcProvider(params.rpcUrl),r=await He("0x525bF2bEb622D7C05E979a8b3fFcDBBEF944450E"),n=await Je(params.pkpEthAddress),a=await st(t,params.tokenIn,n.ethAddress);console.log(`Token info: ${JSON.stringify(a)}`);let i=await Ge(r,n.tokenId,s,e);if(i.enabled&&i.policyIpfsCid!==void 0&&i.policyIpfsCid!=="0x"&&i.policyIpfsCid!==""){console.log(`Executing policy ${i.policyIpfsCid}`);let F={parentToolIpfsCid:e,pkpToolRegistryContractAddress:"0x525bF2bEb622D7C05E979a8b3fFcDBBEF944450E",pkpTokenId:n.tokenId,delegateeAddress:s,tokenInfo:{amount:a.amount.toString(),tokenAddress:params.tokenIn,recipientAddress:params.recipientAddress}};console.log(`Calling policy Lit Action with params: ${JSON.stringify(F)}`),await Lit.Actions.call({ipfsId:i.policyIpfsCid,params:F})}else console.log(`No policy found for tool ${e} on PKP ${n.tokenId} for delegatee ${s}`);let o=await nt(t,n.ethAddress),l=await it(t,a.amount,n.ethAddress),c=await dt(params.tokenIn,params.recipientAddress,a.amount,l,o,params.chainId,n.publicKey),h=await lt(t,c),k;try{k=JSON.parse(h)}catch{k=h}if(typeof k=="object"&&k.error)throw new Error(k.message);if(!k)throw new Error("Transaction failed: No transaction hash returned");if(!ethers.utils.isHexString(k))throw new Error(`Transaction failed: Invalid transaction hash format. Received: ${JSON.stringify(k)}`);Lit.Actions.setResponse({response:JSON.stringify({status:"success",transferHash:k})})}catch(s){console.error("Error:",s);let e={message:s.message,code:s.code,reason:s.reason,error:s.error,...s.transaction&&{transaction:s.transaction},...s.receipt&&{receipt:s.receipt}},t=s.message||String(s);Lit.Actions.setResponse({response:JSON.stringify({status:"error",error:t,details:e})})}})()});return xs();})();
