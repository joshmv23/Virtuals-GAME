"use strict";var LitAction=(()=>{var x=(s,e)=>()=>(s&&(e=s(s=0)),e);var It=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);function Et(s){Le=s}function ye(){return Le}function u(s,e){let t=ye(),r=ve({issueData:e,data:s.data,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,t,t===ie?void 0:ie].filter(n=>!!n)});s.common.issues.push(r)}function _e(s,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?s!==e||!r:!e.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(s):r?r.value:e.get(s)}function Me(s,e,t,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?s!==e||!n:!e.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(s,t):n?n.value=t:e.set(s,t),t}function y(s){if(!s)return{};let{errorMap:e,invalid_type_error:t,required_error:r,description:n}=s;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(i,o)=>{var c,l;let{message:p}=s;return i.code==="invalid_enum_value"?{message:p??o.defaultError}:typeof o.data>"u"?{message:(c=p??r)!==null&&c!==void 0?c:o.defaultError}:i.code!=="invalid_type"?{message:o.defaultError}:{message:(l=p??t)!==null&&l!==void 0?l:o.defaultError}},description:n}}function Ue(s){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return s.precision?e=`${e}\\.\\d{${s.precision}}`:s.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Wt(s){return new RegExp(`^${Ue(s)}$`)}function ze(s){let e=`${Ve}T${Ue(s)}`,t=[];return t.push(s.local?"Z?":"Z"),s.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Gt(s,e){return!!((e==="v4"||!e)&&Ft.test(s)||(e==="v6"||!e)&&Mt.test(s))}function Kt(s,e){if(!Dt.test(s))return!1;try{let[t]=s.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),n=JSON.parse(atob(r));return!(typeof n!="object"||n===null||!n.typ||!n.alg||e&&n.alg!==e)}catch{return!1}}function qt(s,e){return!!((e==="v4"||!e)&&Lt.test(s)||(e==="v6"||!e)&&Vt.test(s))}function Jt(s,e){let t=(s.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,n=t>r?t:r,a=parseInt(s.toFixed(n).replace(".","")),i=parseInt(e.toFixed(n).replace(".",""));return a%i/Math.pow(10,n)}function ne(s){if(s instanceof w){let e={};for(let t in s.shape){let r=s.shape[t];e[t]=A.create(ne(r))}return new w({...s._def,shape:()=>e})}else return s instanceof $?new $({...s._def,type:ne(s.element)}):s instanceof A?A.create(ne(s.unwrap())):s instanceof N?N.create(ne(s.unwrap())):s instanceof R?R.create(s.items.map(e=>ne(e))):s}function Pe(s,e){let t=Z(s),r=Z(e);if(s===e)return{valid:!0,data:s};if(t===f.object&&r===f.object){let n=_.objectKeys(e),a=_.objectKeys(s).filter(o=>n.indexOf(o)!==-1),i={...s,...e};for(let o of a){let c=Pe(s[o],e[o]);if(!c.valid)return{valid:!1};i[o]=c.data}return{valid:!0,data:i}}else if(t===f.array&&r===f.array){if(s.length!==e.length)return{valid:!1};let n=[];for(let a=0;a<s.length;a++){let i=s[a],o=e[a],c=Pe(i,o);if(!c.valid)return{valid:!1};n.push(c.data)}return{valid:!0,data:n}}else return t===f.date&&r===f.date&&+s==+e?{valid:!0,data:s}:{valid:!1}}function Be(s,e){return new X({values:s,typeName:m.ZodEnum,...y(e)})}function $e(s,e){let t=typeof s=="function"?s(e):typeof s=="string"?{message:s}:s;return typeof t=="string"?{message:t}:t}function We(s,e={},t){return s?M.create().superRefine((r,n)=>{var a,i;let o=s(r);if(o instanceof Promise)return o.then(c=>{var l,p;if(!c){let k=$e(e,r),E=(p=(l=k.fatal)!==null&&l!==void 0?l:t)!==null&&p!==void 0?p:!0;n.addIssue({code:"custom",...k,fatal:E})}});if(!o){let c=$e(e,r),l=(i=(a=c.fatal)!==null&&a!==void 0?a:t)!==null&&i!==void 0?i:!0;n.addIssue({code:"custom",...c,fatal:l})}}):M.create()}var _,Ce,f,Z,d,Ct,I,ie,Le,ve,At,b,g,ae,T,Ee,Ae,U,he,h,fe,pe,P,je,v,Pt,St,Ot,Rt,Nt,Dt,Zt,jt,$t,Ie,Ft,Lt,Mt,Vt,Ut,zt,Ve,Bt,L,z,B,W,G,oe,K,q,M,j,S,de,$,w,J,D,ke,H,R,xe,ce,le,be,Y,Q,X,ee,V,C,A,N,te,se,ue,Ht,me,ge,re,Yt,m,Qt,Ge,Ke,Xt,es,qe,ts,ss,rs,ns,as,is,os,ds,cs,ls,us,fs,ps,hs,ms,gs,ys,vs,_s,ks,xs,bs,Ts,ws,Fe,Is,Cs,Es,As,Ps,Ss,Os,Rs,Ns,Je,He=x(()=>{(function(s){s.assertEqual=n=>n;function e(n){}s.assertIs=e;function t(n){throw new Error}s.assertNever=t,s.arrayToEnum=n=>{let a={};for(let i of n)a[i]=i;return a},s.getValidEnumValues=n=>{let a=s.objectKeys(n).filter(o=>typeof n[n[o]]!="number"),i={};for(let o of a)i[o]=n[o];return s.objectValues(i)},s.objectValues=n=>s.objectKeys(n).map(function(a){return n[a]}),s.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let a=[];for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&a.push(i);return a},s.find=(n,a)=>{for(let i of n)if(a(i))return i},s.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function r(n,a=" | "){return n.map(i=>typeof i=="string"?`'${i}'`:i).join(a)}s.joinValues=r,s.jsonStringifyReplacer=(n,a)=>typeof a=="bigint"?a.toString():a})(_||(_={}));(function(s){s.mergeShapes=(e,t)=>({...e,...t})})(Ce||(Ce={}));f=_.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Z=s=>{switch(typeof s){case"undefined":return f.undefined;case"string":return f.string;case"number":return isNaN(s)?f.nan:f.number;case"boolean":return f.boolean;case"function":return f.function;case"bigint":return f.bigint;case"symbol":return f.symbol;case"object":return Array.isArray(s)?f.array:s===null?f.null:s.then&&typeof s.then=="function"&&s.catch&&typeof s.catch=="function"?f.promise:typeof Map<"u"&&s instanceof Map?f.map:typeof Set<"u"&&s instanceof Set?f.set:typeof Date<"u"&&s instanceof Date?f.date:f.object;default:return f.unknown}},d=_.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Ct=s=>JSON.stringify(s,null,2).replace(/"([^"]+)":/g,"$1:"),I=class s extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(a){return a.message},r={_errors:[]},n=a=>{for(let i of a.issues)if(i.code==="invalid_union")i.unionErrors.map(n);else if(i.code==="invalid_return_type")n(i.returnTypeError);else if(i.code==="invalid_arguments")n(i.argumentsError);else if(i.path.length===0)r._errors.push(t(i));else{let o=r,c=0;for(;c<i.path.length;){let l=i.path[c];c===i.path.length-1?(o[l]=o[l]||{_errors:[]},o[l]._errors.push(t(i))):o[l]=o[l]||{_errors:[]},o=o[l],c++}}};return n(this),r}static assert(e){if(!(e instanceof s))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,_.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){let t={},r=[];for(let n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}};I.create=s=>new I(s);ie=(s,e)=>{let t;switch(s.code){case d.invalid_type:s.received===f.undefined?t="Required":t=`Expected ${s.expected}, received ${s.received}`;break;case d.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(s.expected,_.jsonStringifyReplacer)}`;break;case d.unrecognized_keys:t=`Unrecognized key(s) in object: ${_.joinValues(s.keys,", ")}`;break;case d.invalid_union:t="Invalid input";break;case d.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${_.joinValues(s.options)}`;break;case d.invalid_enum_value:t=`Invalid enum value. Expected ${_.joinValues(s.options)}, received '${s.received}'`;break;case d.invalid_arguments:t="Invalid function arguments";break;case d.invalid_return_type:t="Invalid function return type";break;case d.invalid_date:t="Invalid date";break;case d.invalid_string:typeof s.validation=="object"?"includes"in s.validation?(t=`Invalid input: must include "${s.validation.includes}"`,typeof s.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${s.validation.position}`)):"startsWith"in s.validation?t=`Invalid input: must start with "${s.validation.startsWith}"`:"endsWith"in s.validation?t=`Invalid input: must end with "${s.validation.endsWith}"`:_.assertNever(s.validation):s.validation!=="regex"?t=`Invalid ${s.validation}`:t="Invalid";break;case d.too_small:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at least":"more than"} ${s.minimum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at least":"over"} ${s.minimum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(s.minimum))}`:t="Invalid input";break;case d.too_big:s.type==="array"?t=`Array must contain ${s.exact?"exactly":s.inclusive?"at most":"less than"} ${s.maximum} element(s)`:s.type==="string"?t=`String must contain ${s.exact?"exactly":s.inclusive?"at most":"under"} ${s.maximum} character(s)`:s.type==="number"?t=`Number must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="bigint"?t=`BigInt must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="date"?t=`Date must be ${s.exact?"exactly":s.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(s.maximum))}`:t="Invalid input";break;case d.custom:t="Invalid input";break;case d.invalid_intersection_types:t="Intersection results could not be merged";break;case d.not_multiple_of:t=`Number must be a multiple of ${s.multipleOf}`;break;case d.not_finite:t="Number must be finite";break;default:t=e.defaultError,_.assertNever(s)}return{message:t}},Le=ie;ve=s=>{let{data:e,path:t,errorMaps:r,issueData:n}=s,a=[...t,...n.path||[]],i={...n,path:a};if(n.message!==void 0)return{...n,path:a,message:n.message};let o="",c=r.filter(l=>!!l).slice().reverse();for(let l of c)o=l(i,{data:e,defaultError:o}).message;return{...n,path:a,message:o}},At=[];b=class s{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let n of t){if(n.status==="aborted")return g;n.status==="dirty"&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let n of t){let a=await n.key,i=await n.value;r.push({key:a,value:i})}return s.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let n of t){let{key:a,value:i}=n;if(a.status==="aborted"||i.status==="aborted")return g;a.status==="dirty"&&e.dirty(),i.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof i.value<"u"||n.alwaysSet)&&(r[a.value]=i.value)}return{status:e.value,value:r}}},g=Object.freeze({status:"aborted"}),ae=s=>({status:"dirty",value:s}),T=s=>({status:"valid",value:s}),Ee=s=>s.status==="aborted",Ae=s=>s.status==="dirty",U=s=>s.status==="valid",he=s=>typeof Promise<"u"&&s instanceof Promise;(function(s){s.errToObj=e=>typeof e=="string"?{message:e}:e||{},s.toString=e=>typeof e=="string"?e:e?.message})(h||(h={}));P=class{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},je=(s,e)=>{if(U(e))return{success:!0,data:e.value};if(!s.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new I(s.common.issues);return this._error=t,this._error}}};v=class{get description(){return this._def.description}_getType(e){return Z(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Z(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new b,ctx:{common:e.parent.common,data:e.data,parsedType:Z(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(he(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let n={common:{issues:[],async:(r=t?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Z(e)},a=this._parseSync({data:e,path:n.path,parent:n});return je(n,a)}"~validate"(e){var t,r;let n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Z(e)};if(!this["~standard"].async)try{let a=this._parseSync({data:e,path:[],parent:n});return U(a)?{value:a.value}:{issues:n.common.issues}}catch(a){!((r=(t=a?.message)===null||t===void 0?void 0:t.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>U(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Z(e)},n=this._parse({data:e,path:r.path,parent:r}),a=await(he(n)?n:Promise.resolve(n));return je(r,a)}refine(e,t){let r=n=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(n):t;return this._refinement((n,a)=>{let i=e(n),o=()=>a.addIssue({code:d.custom,...r(n)});return typeof Promise<"u"&&i instanceof Promise?i.then(c=>c?!0:(o(),!1)):i?!0:(o(),!1)})}refinement(e,t){return this._refinement((r,n)=>e(r)?!0:(n.addIssue(typeof t=="function"?t(r,n):t),!1))}_refinement(e){return new C({schema:this,typeName:m.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return A.create(this,this._def)}nullable(){return N.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return $.create(this)}promise(){return V.create(this,this._def)}or(e){return J.create([this,e],this._def)}and(e){return H.create(this,e,this._def)}transform(e){return new C({...y(this._def),schema:this,typeName:m.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t=typeof e=="function"?e:()=>e;return new te({...y(this._def),innerType:this,defaultValue:t,typeName:m.ZodDefault})}brand(){return new me({typeName:m.ZodBranded,type:this,...y(this._def)})}catch(e){let t=typeof e=="function"?e:()=>e;return new se({...y(this._def),innerType:this,catchValue:t,typeName:m.ZodCatch})}describe(e){let t=this.constructor;return new t({...this._def,description:e})}pipe(e){return ge.create(this,e)}readonly(){return re.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Pt=/^c[^\s-]{8,}$/i,St=/^[0-9a-z]+$/,Ot=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Rt=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Nt=/^[a-z0-9_-]{21}$/i,Dt=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Zt=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,jt=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,$t="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Ft=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Lt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Mt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Vt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Ut=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,zt=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Ve="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Bt=new RegExp(`^${Ve}$`);L=class s extends v{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==f.string){let a=this._getOrReturnCtx(e);return u(a,{code:d.invalid_type,expected:f.string,received:a.parsedType}),g}let r=new b,n;for(let a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(n=this._getOrReturnCtx(e,n),u(n,{code:d.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(n=this._getOrReturnCtx(e,n),u(n,{code:d.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){let i=e.data.length>a.value,o=e.data.length<a.value;(i||o)&&(n=this._getOrReturnCtx(e,n),i?u(n,{code:d.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):o&&u(n,{code:d.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")jt.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"email",code:d.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")Ie||(Ie=new RegExp($t,"u")),Ie.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"emoji",code:d.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")Rt.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"uuid",code:d.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")Nt.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"nanoid",code:d.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")Pt.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"cuid",code:d.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")St.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"cuid2",code:d.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")Ot.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"ulid",code:d.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),u(n,{validation:"url",code:d.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"regex",code:d.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(n=this._getOrReturnCtx(e,n),u(n,{code:d.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(n=this._getOrReturnCtx(e,n),u(n,{code:d.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(n=this._getOrReturnCtx(e,n),u(n,{code:d.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?ze(a).test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{code:d.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?Bt.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{code:d.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?Wt(a).test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{code:d.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?Zt.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"duration",code:d.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?Gt(e.data,a.version)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"ip",code:d.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?Kt(e.data,a.alg)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"jwt",code:d.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?qt(e.data,a.version)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"cidr",code:d.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?Ut.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"base64",code:d.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?zt.test(e.data)||(n=this._getOrReturnCtx(e,n),u(n,{validation:"base64url",code:d.invalid_string,message:a.message}),r.dirty()):_.assertNever(a);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(n=>e.test(n),{validation:t,code:d.invalid_string,...h.errToObj(r)})}_addCheck(e){return new s({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...h.errToObj(e)})}url(e){return this._addCheck({kind:"url",...h.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...h.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...h.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...h.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...h.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...h.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...h.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...h.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...h.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...h.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...h.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...h.errToObj(e)})}datetime(e){var t,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...h.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...h.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...h.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...h.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...h.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...h.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...h.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...h.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...h.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...h.errToObj(t)})}nonempty(e){return this.min(1,h.errToObj(e))}trim(){return new s({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new s({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new s({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};L.create=s=>{var e;return new L({checks:[],typeName:m.ZodString,coerce:(e=s?.coerce)!==null&&e!==void 0?e:!1,...y(s)})};z=class s extends v{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==f.number){let a=this._getOrReturnCtx(e);return u(a,{code:d.invalid_type,expected:f.number,received:a.parsedType}),g}let r,n=new b;for(let a of this._def.checks)a.kind==="int"?_.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),u(r,{code:d.invalid_type,expected:"integer",received:"float",message:a.message}),n.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),u(r,{code:d.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),u(r,{code:d.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty()):a.kind==="multipleOf"?Jt(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),u(r,{code:d.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),u(r,{code:d.not_finite,message:a.message}),n.dirty()):_.assertNever(a);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,h.toString(t))}gt(e,t){return this.setLimit("min",e,!1,h.toString(t))}lte(e,t){return this.setLimit("max",e,!0,h.toString(t))}lt(e,t){return this.setLimit("max",e,!1,h.toString(t))}setLimit(e,t,r,n){return new s({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:h.toString(n)}]})}_addCheck(e){return new s({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:h.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:h.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:h.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:h.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:h.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:h.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:h.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:h.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:h.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&_.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}};z.create=s=>new z({checks:[],typeName:m.ZodNumber,coerce:s?.coerce||!1,...y(s)});B=class s extends v{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==f.bigint)return this._getInvalidInput(e);let r,n=new b;for(let a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),u(r,{code:d.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),u(r,{code:d.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),u(r,{code:d.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):_.assertNever(a);return{status:n.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return u(t,{code:d.invalid_type,expected:f.bigint,received:t.parsedType}),g}gte(e,t){return this.setLimit("min",e,!0,h.toString(t))}gt(e,t){return this.setLimit("min",e,!1,h.toString(t))}lte(e,t){return this.setLimit("max",e,!0,h.toString(t))}lt(e,t){return this.setLimit("max",e,!1,h.toString(t))}setLimit(e,t,r,n){return new s({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:h.toString(n)}]})}_addCheck(e){return new s({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:h.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:h.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:h.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:h.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:h.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};B.create=s=>{var e;return new B({checks:[],typeName:m.ZodBigInt,coerce:(e=s?.coerce)!==null&&e!==void 0?e:!1,...y(s)})};W=class extends v{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==f.boolean){let r=this._getOrReturnCtx(e);return u(r,{code:d.invalid_type,expected:f.boolean,received:r.parsedType}),g}return T(e.data)}};W.create=s=>new W({typeName:m.ZodBoolean,coerce:s?.coerce||!1,...y(s)});G=class s extends v{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==f.date){let a=this._getOrReturnCtx(e);return u(a,{code:d.invalid_type,expected:f.date,received:a.parsedType}),g}if(isNaN(e.data.getTime())){let a=this._getOrReturnCtx(e);return u(a,{code:d.invalid_date}),g}let r=new b,n;for(let a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(n=this._getOrReturnCtx(e,n),u(n,{code:d.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(n=this._getOrReturnCtx(e,n),u(n,{code:d.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):_.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new s({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:h.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:h.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}};G.create=s=>new G({checks:[],coerce:s?.coerce||!1,typeName:m.ZodDate,...y(s)});oe=class extends v{_parse(e){if(this._getType(e)!==f.symbol){let r=this._getOrReturnCtx(e);return u(r,{code:d.invalid_type,expected:f.symbol,received:r.parsedType}),g}return T(e.data)}};oe.create=s=>new oe({typeName:m.ZodSymbol,...y(s)});K=class extends v{_parse(e){if(this._getType(e)!==f.undefined){let r=this._getOrReturnCtx(e);return u(r,{code:d.invalid_type,expected:f.undefined,received:r.parsedType}),g}return T(e.data)}};K.create=s=>new K({typeName:m.ZodUndefined,...y(s)});q=class extends v{_parse(e){if(this._getType(e)!==f.null){let r=this._getOrReturnCtx(e);return u(r,{code:d.invalid_type,expected:f.null,received:r.parsedType}),g}return T(e.data)}};q.create=s=>new q({typeName:m.ZodNull,...y(s)});M=class extends v{constructor(){super(...arguments),this._any=!0}_parse(e){return T(e.data)}};M.create=s=>new M({typeName:m.ZodAny,...y(s)});j=class extends v{constructor(){super(...arguments),this._unknown=!0}_parse(e){return T(e.data)}};j.create=s=>new j({typeName:m.ZodUnknown,...y(s)});S=class extends v{_parse(e){let t=this._getOrReturnCtx(e);return u(t,{code:d.invalid_type,expected:f.never,received:t.parsedType}),g}};S.create=s=>new S({typeName:m.ZodNever,...y(s)});de=class extends v{_parse(e){if(this._getType(e)!==f.undefined){let r=this._getOrReturnCtx(e);return u(r,{code:d.invalid_type,expected:f.void,received:r.parsedType}),g}return T(e.data)}};de.create=s=>new de({typeName:m.ZodVoid,...y(s)});$=class s extends v{_parse(e){let{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==f.array)return u(t,{code:d.invalid_type,expected:f.array,received:t.parsedType}),g;if(n.exactLength!==null){let i=t.data.length>n.exactLength.value,o=t.data.length<n.exactLength.value;(i||o)&&(u(t,{code:i?d.too_big:d.too_small,minimum:o?n.exactLength.value:void 0,maximum:i?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(n.minLength!==null&&t.data.length<n.minLength.value&&(u(t,{code:d.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),n.maxLength!==null&&t.data.length>n.maxLength.value&&(u(t,{code:d.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((i,o)=>n.type._parseAsync(new P(t,i,t.path,o)))).then(i=>b.mergeArray(r,i));let a=[...t.data].map((i,o)=>n.type._parseSync(new P(t,i,t.path,o)));return b.mergeArray(r,a)}get element(){return this._def.type}min(e,t){return new s({...this._def,minLength:{value:e,message:h.toString(t)}})}max(e,t){return new s({...this._def,maxLength:{value:e,message:h.toString(t)}})}length(e,t){return new s({...this._def,exactLength:{value:e,message:h.toString(t)}})}nonempty(e){return this.min(1,e)}};$.create=(s,e)=>new $({type:s,minLength:null,maxLength:null,exactLength:null,typeName:m.ZodArray,...y(e)});w=class s extends v{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),t=_.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==f.object){let l=this._getOrReturnCtx(e);return u(l,{code:d.invalid_type,expected:f.object,received:l.parsedType}),g}let{status:r,ctx:n}=this._processInputParams(e),{shape:a,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof S&&this._def.unknownKeys==="strip"))for(let l in n.data)i.includes(l)||o.push(l);let c=[];for(let l of i){let p=a[l],k=n.data[l];c.push({key:{status:"valid",value:l},value:p._parse(new P(n,k,n.path,l)),alwaysSet:l in n.data})}if(this._def.catchall instanceof S){let l=this._def.unknownKeys;if(l==="passthrough")for(let p of o)c.push({key:{status:"valid",value:p},value:{status:"valid",value:n.data[p]}});else if(l==="strict")o.length>0&&(u(n,{code:d.unrecognized_keys,keys:o}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let l=this._def.catchall;for(let p of o){let k=n.data[p];c.push({key:{status:"valid",value:p},value:l._parse(new P(n,k,n.path,p)),alwaysSet:p in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let l=[];for(let p of c){let k=await p.key,E=await p.value;l.push({key:k,value:E,alwaysSet:p.alwaysSet})}return l}).then(l=>b.mergeObjectSync(r,l)):b.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return h.errToObj,new s({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,r)=>{var n,a,i,o;let c=(i=(a=(n=this._def).errorMap)===null||a===void 0?void 0:a.call(n,t,r).message)!==null&&i!==void 0?i:r.defaultError;return t.code==="unrecognized_keys"?{message:(o=h.errToObj(e).message)!==null&&o!==void 0?o:c}:{message:c}}}:{}})}strip(){return new s({...this._def,unknownKeys:"strip"})}passthrough(){return new s({...this._def,unknownKeys:"passthrough"})}extend(e){return new s({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new s({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:m.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new s({...this._def,catchall:e})}pick(e){let t={};return _.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])}),new s({...this._def,shape:()=>t})}omit(e){let t={};return _.objectKeys(this.shape).forEach(r=>{e[r]||(t[r]=this.shape[r])}),new s({...this._def,shape:()=>t})}deepPartial(){return ne(this)}partial(e){let t={};return _.objectKeys(this.shape).forEach(r=>{let n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}),new s({...this._def,shape:()=>t})}required(e){let t={};return _.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])t[r]=this.shape[r];else{let a=this.shape[r];for(;a instanceof A;)a=a._def.innerType;t[r]=a}}),new s({...this._def,shape:()=>t})}keyof(){return Be(_.objectKeys(this.shape))}};w.create=(s,e)=>new w({shape:()=>s,unknownKeys:"strip",catchall:S.create(),typeName:m.ZodObject,...y(e)});w.strictCreate=(s,e)=>new w({shape:()=>s,unknownKeys:"strict",catchall:S.create(),typeName:m.ZodObject,...y(e)});w.lazycreate=(s,e)=>new w({shape:s,unknownKeys:"strip",catchall:S.create(),typeName:m.ZodObject,...y(e)});J=class extends v{_parse(e){let{ctx:t}=this._processInputParams(e),r=this._def.options;function n(a){for(let o of a)if(o.result.status==="valid")return o.result;for(let o of a)if(o.result.status==="dirty")return t.common.issues.push(...o.ctx.common.issues),o.result;let i=a.map(o=>new I(o.ctx.common.issues));return u(t,{code:d.invalid_union,unionErrors:i}),g}if(t.common.async)return Promise.all(r.map(async a=>{let i={...t,common:{...t.common,issues:[]},parent:null};return{result:await a._parseAsync({data:t.data,path:t.path,parent:i}),ctx:i}})).then(n);{let a,i=[];for(let c of r){let l={...t,common:{...t.common,issues:[]},parent:null},p=c._parseSync({data:t.data,path:t.path,parent:l});if(p.status==="valid")return p;p.status==="dirty"&&!a&&(a={result:p,ctx:l}),l.common.issues.length&&i.push(l.common.issues)}if(a)return t.common.issues.push(...a.ctx.common.issues),a.result;let o=i.map(c=>new I(c));return u(t,{code:d.invalid_union,unionErrors:o}),g}}get options(){return this._def.options}};J.create=(s,e)=>new J({options:s,typeName:m.ZodUnion,...y(e)});D=s=>s instanceof Y?D(s.schema):s instanceof C?D(s.innerType()):s instanceof Q?[s.value]:s instanceof X?s.options:s instanceof ee?_.objectValues(s.enum):s instanceof te?D(s._def.innerType):s instanceof K?[void 0]:s instanceof q?[null]:s instanceof A?[void 0,...D(s.unwrap())]:s instanceof N?[null,...D(s.unwrap())]:s instanceof me||s instanceof re?D(s.unwrap()):s instanceof se?D(s._def.innerType):[],ke=class s extends v{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==f.object)return u(t,{code:d.invalid_type,expected:f.object,received:t.parsedType}),g;let r=this.discriminator,n=t.data[r],a=this.optionsMap.get(n);return a?t.common.async?a._parseAsync({data:t.data,path:t.path,parent:t}):a._parseSync({data:t.data,path:t.path,parent:t}):(u(t,{code:d.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),g)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){let n=new Map;for(let a of t){let i=D(a.shape[e]);if(!i.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of i){if(n.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);n.set(o,a)}}return new s({typeName:m.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...y(r)})}};H=class extends v{_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=(a,i)=>{if(Ee(a)||Ee(i))return g;let o=Pe(a.value,i.value);return o.valid?((Ae(a)||Ae(i))&&t.dirty(),{status:t.value,value:o.data}):(u(r,{code:d.invalid_intersection_types}),g)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,i])=>n(a,i)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};H.create=(s,e,t)=>new H({left:s,right:e,typeName:m.ZodIntersection,...y(t)});R=class s extends v{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.array)return u(r,{code:d.invalid_type,expected:f.array,received:r.parsedType}),g;if(r.data.length<this._def.items.length)return u(r,{code:d.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),g;!this._def.rest&&r.data.length>this._def.items.length&&(u(r,{code:d.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let a=[...r.data].map((i,o)=>{let c=this._def.items[o]||this._def.rest;return c?c._parse(new P(r,i,r.path,o)):null}).filter(i=>!!i);return r.common.async?Promise.all(a).then(i=>b.mergeArray(t,i)):b.mergeArray(t,a)}get items(){return this._def.items}rest(e){return new s({...this._def,rest:e})}};R.create=(s,e)=>{if(!Array.isArray(s))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new R({items:s,typeName:m.ZodTuple,rest:null,...y(e)})};xe=class s extends v{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.object)return u(r,{code:d.invalid_type,expected:f.object,received:r.parsedType}),g;let n=[],a=this._def.keyType,i=this._def.valueType;for(let o in r.data)n.push({key:a._parse(new P(r,o,r.path,o)),value:i._parse(new P(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?b.mergeObjectAsync(t,n):b.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return t instanceof v?new s({keyType:e,valueType:t,typeName:m.ZodRecord,...y(r)}):new s({keyType:L.create(),valueType:e,typeName:m.ZodRecord,...y(t)})}},ce=class extends v{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.map)return u(r,{code:d.invalid_type,expected:f.map,received:r.parsedType}),g;let n=this._def.keyType,a=this._def.valueType,i=[...r.data.entries()].map(([o,c],l)=>({key:n._parse(new P(r,o,r.path,[l,"key"])),value:a._parse(new P(r,c,r.path,[l,"value"]))}));if(r.common.async){let o=new Map;return Promise.resolve().then(async()=>{for(let c of i){let l=await c.key,p=await c.value;if(l.status==="aborted"||p.status==="aborted")return g;(l.status==="dirty"||p.status==="dirty")&&t.dirty(),o.set(l.value,p.value)}return{status:t.value,value:o}})}else{let o=new Map;for(let c of i){let l=c.key,p=c.value;if(l.status==="aborted"||p.status==="aborted")return g;(l.status==="dirty"||p.status==="dirty")&&t.dirty(),o.set(l.value,p.value)}return{status:t.value,value:o}}}};ce.create=(s,e,t)=>new ce({valueType:e,keyType:s,typeName:m.ZodMap,...y(t)});le=class s extends v{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.set)return u(r,{code:d.invalid_type,expected:f.set,received:r.parsedType}),g;let n=this._def;n.minSize!==null&&r.data.size<n.minSize.value&&(u(r,{code:d.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),n.maxSize!==null&&r.data.size>n.maxSize.value&&(u(r,{code:d.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());let a=this._def.valueType;function i(c){let l=new Set;for(let p of c){if(p.status==="aborted")return g;p.status==="dirty"&&t.dirty(),l.add(p.value)}return{status:t.value,value:l}}let o=[...r.data.values()].map((c,l)=>a._parse(new P(r,c,r.path,l)));return r.common.async?Promise.all(o).then(c=>i(c)):i(o)}min(e,t){return new s({...this._def,minSize:{value:e,message:h.toString(t)}})}max(e,t){return new s({...this._def,maxSize:{value:e,message:h.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};le.create=(s,e)=>new le({valueType:s,minSize:null,maxSize:null,typeName:m.ZodSet,...y(e)});be=class s extends v{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==f.function)return u(t,{code:d.invalid_type,expected:f.function,received:t.parsedType}),g;function r(o,c){return ve({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ye(),ie].filter(l=>!!l),issueData:{code:d.invalid_arguments,argumentsError:c}})}function n(o,c){return ve({data:o,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ye(),ie].filter(l=>!!l),issueData:{code:d.invalid_return_type,returnTypeError:c}})}let a={errorMap:t.common.contextualErrorMap},i=t.data;if(this._def.returns instanceof V){let o=this;return T(async function(...c){let l=new I([]),p=await o._def.args.parseAsync(c,a).catch(O=>{throw l.addIssue(r(c,O)),l}),k=await Reflect.apply(i,this,p);return await o._def.returns._def.type.parseAsync(k,a).catch(O=>{throw l.addIssue(n(k,O)),l})})}else{let o=this;return T(function(...c){let l=o._def.args.safeParse(c,a);if(!l.success)throw new I([r(c,l.error)]);let p=Reflect.apply(i,this,l.data),k=o._def.returns.safeParse(p,a);if(!k.success)throw new I([n(p,k.error)]);return k.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new s({...this._def,args:R.create(e).rest(j.create())})}returns(e){return new s({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new s({args:e||R.create([]).rest(j.create()),returns:t||j.create(),typeName:m.ZodFunction,...y(r)})}},Y=class extends v{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};Y.create=(s,e)=>new Y({getter:s,typeName:m.ZodLazy,...y(e)});Q=class extends v{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return u(t,{received:t.data,code:d.invalid_literal,expected:this._def.value}),g}return{status:"valid",value:e.data}}get value(){return this._def.value}};Q.create=(s,e)=>new Q({value:s,typeName:m.ZodLiteral,...y(e)});X=class s extends v{constructor(){super(...arguments),fe.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let t=this._getOrReturnCtx(e),r=this._def.values;return u(t,{expected:_.joinValues(r),received:t.parsedType,code:d.invalid_type}),g}if(_e(this,fe,"f")||Me(this,fe,new Set(this._def.values),"f"),!_e(this,fe,"f").has(e.data)){let t=this._getOrReturnCtx(e),r=this._def.values;return u(t,{received:t.data,code:d.invalid_enum_value,options:r}),g}return T(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return s.create(e,{...this._def,...t})}exclude(e,t=this._def){return s.create(this.options.filter(r=>!e.includes(r)),{...this._def,...t})}};fe=new WeakMap;X.create=Be;ee=class extends v{constructor(){super(...arguments),pe.set(this,void 0)}_parse(e){let t=_.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==f.string&&r.parsedType!==f.number){let n=_.objectValues(t);return u(r,{expected:_.joinValues(n),received:r.parsedType,code:d.invalid_type}),g}if(_e(this,pe,"f")||Me(this,pe,new Set(_.getValidEnumValues(this._def.values)),"f"),!_e(this,pe,"f").has(e.data)){let n=_.objectValues(t);return u(r,{received:r.data,code:d.invalid_enum_value,options:n}),g}return T(e.data)}get enum(){return this._def.values}};pe=new WeakMap;ee.create=(s,e)=>new ee({values:s,typeName:m.ZodNativeEnum,...y(e)});V=class extends v{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==f.promise&&t.common.async===!1)return u(t,{code:d.invalid_type,expected:f.promise,received:t.parsedType}),g;let r=t.parsedType===f.promise?t.data:Promise.resolve(t.data);return T(r.then(n=>this._def.type.parseAsync(n,{path:t.path,errorMap:t.common.contextualErrorMap})))}};V.create=(s,e)=>new V({type:s,typeName:m.ZodPromise,...y(e)});C=class extends v{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===m.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,a={addIssue:i=>{u(r,i),i.fatal?t.abort():t.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),n.type==="preprocess"){let i=n.transform(r.data,a);if(r.common.async)return Promise.resolve(i).then(async o=>{if(t.value==="aborted")return g;let c=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return c.status==="aborted"?g:c.status==="dirty"||t.value==="dirty"?ae(c.value):c});{if(t.value==="aborted")return g;let o=this._def.schema._parseSync({data:i,path:r.path,parent:r});return o.status==="aborted"?g:o.status==="dirty"||t.value==="dirty"?ae(o.value):o}}if(n.type==="refinement"){let i=o=>{let c=n.refinement(o,a);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){let o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?g:(o.status==="dirty"&&t.dirty(),i(o.value),{status:t.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?g:(o.status==="dirty"&&t.dirty(),i(o.value).then(()=>({status:t.value,value:o.value}))))}if(n.type==="transform")if(r.common.async===!1){let i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!U(i))return i;let o=n.transform(i.value,a);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>U(i)?Promise.resolve(n.transform(i.value,a)).then(o=>({status:t.value,value:o})):i);_.assertNever(n)}};C.create=(s,e,t)=>new C({schema:s,typeName:m.ZodEffects,effect:e,...y(t)});C.createWithPreprocess=(s,e,t)=>new C({schema:e,effect:{type:"preprocess",transform:s},typeName:m.ZodEffects,...y(t)});A=class extends v{_parse(e){return this._getType(e)===f.undefined?T(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};A.create=(s,e)=>new A({innerType:s,typeName:m.ZodOptional,...y(e)});N=class extends v{_parse(e){return this._getType(e)===f.null?T(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};N.create=(s,e)=>new N({innerType:s,typeName:m.ZodNullable,...y(e)});te=class extends v{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return t.parsedType===f.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};te.create=(s,e)=>new te({innerType:s,typeName:m.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...y(e)});se=class extends v{_parse(e){let{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return he(n)?n.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new I(r.common.issues)},input:r.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new I(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};se.create=(s,e)=>new se({innerType:s,typeName:m.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...y(e)});ue=class extends v{_parse(e){if(this._getType(e)!==f.nan){let r=this._getOrReturnCtx(e);return u(r,{code:d.invalid_type,expected:f.nan,received:r.parsedType}),g}return{status:"valid",value:e.data}}};ue.create=s=>new ue({typeName:m.ZodNaN,...y(s)});Ht=Symbol("zod_brand"),me=class extends v{_parse(e){let{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}},ge=class s extends v{_parse(e){let{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{let a=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?g:a.status==="dirty"?(t.dirty(),ae(a.value)):this._def.out._parseAsync({data:a.value,path:r.path,parent:r})})();{let n=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return n.status==="aborted"?g:n.status==="dirty"?(t.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:r.path,parent:r})}}static create(e,t){return new s({in:e,out:t,typeName:m.ZodPipeline})}},re=class extends v{_parse(e){let t=this._def.innerType._parse(e),r=n=>(U(n)&&(n.value=Object.freeze(n.value)),n);return he(t)?t.then(n=>r(n)):r(t)}unwrap(){return this._def.innerType}};re.create=(s,e)=>new re({innerType:s,typeName:m.ZodReadonly,...y(e)});Yt={object:w.lazycreate};(function(s){s.ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly"})(m||(m={}));Qt=(s,e={message:`Input not instance of ${s.name}`})=>We(t=>t instanceof s,e),Ge=L.create,Ke=z.create,Xt=ue.create,es=B.create,qe=W.create,ts=G.create,ss=oe.create,rs=K.create,ns=q.create,as=M.create,is=j.create,os=S.create,ds=de.create,cs=$.create,ls=w.create,us=w.strictCreate,fs=J.create,ps=ke.create,hs=H.create,ms=R.create,gs=xe.create,ys=ce.create,vs=le.create,_s=be.create,ks=Y.create,xs=Q.create,bs=X.create,Ts=ee.create,ws=V.create,Fe=C.create,Is=A.create,Cs=N.create,Es=C.createWithPreprocess,As=ge.create,Ps=()=>Ge().optional(),Ss=()=>Ke().optional(),Os=()=>qe().optional(),Rs={string:s=>L.create({...s,coerce:!0}),number:s=>z.create({...s,coerce:!0}),boolean:s=>W.create({...s,coerce:!0}),bigint:s=>B.create({...s,coerce:!0}),date:s=>G.create({...s,coerce:!0})},Ns=g,Je=Object.freeze({__proto__:null,defaultErrorMap:ie,setErrorMap:Et,getErrorMap:ye,makeIssue:ve,EMPTY_PATH:At,addIssueToContext:u,ParseStatus:b,INVALID:g,DIRTY:ae,OK:T,isAborted:Ee,isDirty:Ae,isValid:U,isAsync:he,get util(){return _},get objectUtil(){return Ce},ZodParsedType:f,getParsedType:Z,ZodType:v,datetimeRegex:ze,ZodString:L,ZodNumber:z,ZodBigInt:B,ZodBoolean:W,ZodDate:G,ZodSymbol:oe,ZodUndefined:K,ZodNull:q,ZodAny:M,ZodUnknown:j,ZodNever:S,ZodVoid:de,ZodArray:$,ZodObject:w,ZodUnion:J,ZodDiscriminatedUnion:ke,ZodIntersection:H,ZodTuple:R,ZodRecord:xe,ZodMap:ce,ZodSet:le,ZodFunction:be,ZodLazy:Y,ZodLiteral:Q,ZodEnum:X,ZodNativeEnum:ee,ZodPromise:V,ZodEffects:C,ZodTransformer:C,ZodOptional:A,ZodNullable:N,ZodDefault:te,ZodCatch:se,ZodNaN:ue,BRAND:Ht,ZodBranded:me,ZodPipeline:ge,ZodReadonly:re,custom:We,Schema:v,ZodSchema:v,late:Yt,get ZodFirstPartyTypeKind(){return m},coerce:Rs,any:as,array:cs,bigint:es,boolean:qe,date:ts,discriminatedUnion:ps,effect:Fe,enum:bs,function:_s,instanceof:Qt,intersection:hs,lazy:ks,literal:xs,map:ys,nan:Xt,nativeEnum:Ts,never:os,null:ns,nullable:Cs,number:Ke,object:ls,oboolean:Os,onumber:Ss,optional:Is,ostring:Ps,pipeline:As,preprocess:Es,promise:ws,record:gs,set:vs,strictObject:us,string:Ge,symbol:ss,transformer:Fe,tuple:ms,undefined:rs,union:fs,unknown:is,void:ds,NEVER:Ns,ZodIssueCode:d,quotelessJson:Ct,ZodError:I})});var Ls,Ye=x(()=>{"use strict";He();Ls=Je.string().regex(/^0x[a-fA-F0-9]{40}$/,"Invalid Ethereum address format")});var Qe=x(()=>{"use strict"});var Xe,et=x(()=>{"use strict";Xe=async(s,e,t,r)=>{console.log(`Fetching tool policy from PKP Tool Registry: ${s.address}...`,`PKP Token ID: ${e}`,`Delegatee Address: ${t}`,`Tool IPFS CID: ${r}`);let n=(await s.getToolPoliciesForDelegatees(e,[r],[t]))[0];return console.log("Tool Policy:",`Tool IPFS CID: ${n.toolIpfsCid}`,`Policy IPFS CID: ${n.policyIpfsCid}`,`Delegatee Address: ${n.delegatee}`,`Policy Enabled: ${n.enabled}`),n}});var Te,Se=x(()=>{"use strict";Te={"datil-dev":{pubkeyRouterAddress:"0xbc01f21C58Ca83f25b09338401D53D4c2344D1d9"},"datil-test":{pubkeyRouterAddress:"0x65C3d057aef28175AfaC61a74cc6b27E88405583"},datil:{pubkeyRouterAddress:"0xF182d6bEf16Ba77e69372dD096D8B70Bc3d5B475"}}});var tt,st=x(()=>{"use strict";Se();tt=async s=>{console.log("Getting PKP info from PubkeyRouter...");let e=Te["datil-dev"];if(!e)throw new Error("Unsupported Lit network: datil-dev");let t=["function ethAddressToPkpId(address ethAddress) public view returns (uint256)","function getPubkey(uint256 tokenId) public view returns (bytes memory)"],r=new ethers.Contract(e.pubkeyRouterAddress,t,new ethers.providers.JsonRpcProvider(await Lit.Actions.getRpcUrl({chain:"yellowstone"})));console.log(`Getting PKP ID for eth address ${s}...`);let n=await r.ethAddressToPkpId(s);console.log(`Got PKP token ID: ${n}`),console.log(`Getting public key for PKP ID ${n}...`);let a=await r.getPubkey(n);return console.log(`Got public key: ${a}`),{tokenId:n.toString(),ethAddress:s,publicKey:a}}});var rt,nt=x(()=>{"use strict";rt=async s=>{let e=["function registerTools(uint256 pkpTokenId, string[] calldata toolIpfsCids, bool enabled) external","function removeTools(uint256 pkpTokenId, string[] calldata toolIpfsCids) external","function enableTools(uint256 pkpTokenId, string[] calldata toolIpfsCids) external","function disableTools(uint256 pkpTokenId, string[] calldata toolIpfsCids) external","function permitToolsForDelegatees(uint256 pkpTokenId, string[] calldata toolIpfsCids, address[] calldata delegatees) external","function unpermitToolsForDelegatees(uint256 pkpTokenId, string[] calldata toolIpfsCids, address[] calldata delegatees) external","function getRegisteredTools(uint256 pkpTokenId, string[] calldata toolIpfsCids) external view returns (tuple(string toolIpfsCid, bool toolEnabled)[] memory toolsInfo)","function getAllRegisteredTools(uint256 pkpTokenId) external view returns (tuple(string toolIpfsCid, bool toolEnabled)[] memory toolsInfo)","function getRegisteredToolsAndDelegatees(uint256 pkpTokenId, string[] calldata toolIpfsCids) external view returns (tuple(string toolIpfsCid, bool toolEnabled, address[] delegatees, string[] delegateesPolicyIpfsCids, bool[] delegateesPolicyEnabled) memory toolInfo)","function getAllRegisteredToolsAndDelegatees(uint256 pkpTokenId) external view returns (tuple(string toolIpfsCid, bool toolEnabled, address[] delegatees, string[] delegateesPolicyIpfsCids, bool[] delegateesPolicyEnabled)[] memory toolsInfo)","function getToolsWithPolicy(uint256 pkpTokenId) external view returns (tuple(string toolIpfsCid, bool toolEnabled, address[] delegatees, string[] delegateesPolicyIpfsCids, bool[] delegateesPolicyEnabled)[] memory toolsInfo)","function getToolsWithoutPolicy(uint256 pkpTokenId) external view returns (tuple(string toolIpfsCid, bool toolEnabled, address[] delegatees)[] memory toolsWithoutPolicy)","function isToolRegistered(uint256 pkpTokenId, string calldata toolIpfsCid) external view returns (bool isRegistered, bool isEnabled)","function isToolPermittedForDelegatee(uint256 pkpTokenId, string calldata toolIpfsCid, address delegatee) external view returns (bool isPermitted, bool isEnabled)","function getPermittedToolsForDelegatee(uint256 pkpTokenId, address delegatee) external view returns (tuple(string toolIpfsCid, bool toolEnabled, address delegatee, string policyIpfsCid, bool policyEnabled)[] memory permittedTools)","function addDelegatees(uint256 pkpTokenId, address[] calldata delegatees) external","function removeDelegatees(uint256 pkpTokenId, address[] calldata delegatees) external","function getDelegatees(uint256 pkpTokenId) external view returns (address[] memory)","function getDelegatedPkps(address delegatee) external view returns (uint256[] memory)","function isPkpDelegatee(uint256 pkpTokenId, address delegatee) external view returns (bool)","function getToolPoliciesForDelegatees(uint256 pkpTokenId, string[] calldata toolIpfsCids, address[] calldata delegatees) external view returns (tuple(string toolIpfsCid, string policyIpfsCid, address delegatee, bool enabled)[] memory toolPolicies)","function setToolPoliciesForDelegatees(uint256 pkpTokenId, string[] calldata toolIpfsCids, address[] calldata delegatees, string[] calldata policyIpfsCids, bool enablePolicies) external","function removeToolPoliciesForDelegatees(uint256 pkpTokenId, string[] calldata toolIpfsCids, address[] calldata delegatees) external","function enableToolPoliciesForDelegatees(uint256 pkpTokenId, string[] calldata toolIpfsCids, address[] calldata delegatees) external","function disableToolPoliciesForDelegatees(uint256 pkpTokenId, string[] calldata toolIpfsCids, address[] calldata delegatees) external","function getToolPolicyParameters(uint256 pkpTokenId, string calldata toolIpfsCid, address delegatee, string[] calldata parameterNames) external view returns (tuple(string name, bytes value)[] memory parameters)","function getAllToolPolicyParameters(uint256 pkpTokenId, string calldata toolIpfsCid, address delegatee) external view returns (tuple(string name, bytes value)[] memory parameters)","function setToolPolicyParametersForDelegatee(uint256 pkpTokenId, string calldata toolIpfsCid, address delegatee, string[] calldata parameterNames, bytes[] calldata parameterValues) external","function removeToolPolicyParametersForDelegatee(uint256 pkpTokenId, string calldata toolIpfsCid, address delegatee, string[] calldata parameterNames) external","error InvalidDelegatee()","error EmptyDelegatees()","error DelegateeAlreadyExists(uint256 pkpTokenId, address delegatee)","error DelegateeNotFound(uint256 pkpTokenId, address delegatee)","error EmptyIPFSCID()","error ToolNotFound(string toolIpfsCid)","error ToolAlreadyRegistered(string toolIpfsCid)","error ArrayLengthMismatch()","error InvalidPolicyParameters()","error PolicyParameterAlreadySet(string parameterName)","error InvalidPolicyValue()","error NoPolicySet(uint256 pkpTokenId, string toolIpfsCid, address delegatee)","error PolicyAlreadySet(uint256 pkpTokenId, string toolIpfsCid, address delegatee)","error PolicySameEnabledState(uint256 pkpTokenId, string toolIpfsCid, address delegatee)","error EmptyPolicyIPFSCID()","error NotPKPOwner()","event ToolsRegistered(uint256 indexed pkpTokenId, bool enabled, string[] toolIpfsCids)","event ToolsRemoved(uint256 indexed pkpTokenId, string[] toolIpfsCids)","event ToolsEnabled(uint256 indexed pkpTokenId, string[] toolIpfsCids)","event ToolsDisabled(uint256 indexed pkpTokenId, string[] toolIpfsCids)","event ToolsPermitted(uint256 indexed pkpTokenId, string[] toolIpfsCids, address[] delegatees)","event AddedDelegatees(uint256 indexed pkpTokenId, address[] delegatees)","event RemovedDelegatees(uint256 indexed pkpTokenId, address[] delegatees)","event ToolPoliciesSet(uint256 indexed pkpTokenId, string[] toolIpfsCids, address[] delegatees, string[] policyIpfsCids)","event ToolPoliciesRemoved(uint256 indexed pkpTokenId, string[] toolIpfsCids, address[] delegatees)","event PoliciesEnabled(uint256 indexed pkpTokenId, string[] toolIpfsCids, address[] delegatees)","event PoliciesDisabled(uint256 indexed pkpTokenId, string[] toolIpfsCids, address[] delegatees)","event PolicyParametersSet(uint256 indexed pkpTokenId, string toolIpfsCids, address delegatee, string[] parameterNames, bytes[] parameterValues)","event PolicyParametersRemoved(uint256 indexed pkpTokenId, string toolIpfsCids, address delegatee, string[] parameterNames)","event ToolsUnpermitted(uint256 indexed pkpTokenId, string[] toolIpfsCids, address[] delegatees)"];return new ethers.Contract(s,e,new ethers.providers.JsonRpcProvider(await Lit.Actions.getRpcUrl({chain:"yellowstone"})))}});var at=x(()=>{"use strict"});var it=x(()=>{"use strict"});var ot=x(()=>{"use strict";Qe();et();st();nt();at();Se();it()});var dt=x(()=>{"use strict";Ye();ot()});async function ct(s,e,t,r,n){if(console.log("Gathering token info..."),ethers.utils.getAddress(e),ethers.utils.getAddress(r),await s.getCode(params.tokenIn)==="0x")throw new Error(`No contract found at ${params.tokenIn}`);if(await s.getCode(params.tokenOut)==="0x")throw new Error(`No contract found at ${params.tokenOut}`);let o=new ethers.utils.Interface(["function decimals() view returns (uint8)","function balanceOf(address) view returns (uint256)","function approve(address,uint256) external returns (bool)"]),c=new ethers.Contract(params.tokenIn,o,s),l=new ethers.Contract(params.tokenOut,o,s),[p,k]=await Promise.all([c.decimals(),l.decimals()]);console.log("Token decimals:",p,k);let[E,O]=await Promise.all([c.balanceOf(n.ethAddress),l.balanceOf(n.ethAddress)]);console.log("Token balances (in/out):",E.toString(),O.toString());let F=ethers.utils.parseUnits(t,p);if(F.gt(E))throw new Error("Insufficient tokenIn balance");return{tokenIn:{decimals:p,balance:E,amount:F,contract:c},tokenOut:{decimals:k,balance:O,contract:l}}}var lt=x(()=>{"use strict"});var ut,ft=x(()=>{"use strict";ut=s=>{let e,t;switch(s){case"8453":e="0x3d4e44Eb1374240CE5F1B871ab261CD16335B76a",t="0x2626664c2603336E57B271c5C0b26F421741e481";break;case"1":case"42161":e="0x61fFE014bA17989E743c5F6cB21bF9697530B21e",t="0x68b3465833fb72A70ecDF485E0e4C7bD8665Fc45";break;default:throw new Error(`Unsupported chain ID: ${s}`)}return console.log(`Using Uniswap V3 Quoter: ${e}`),console.log(`Using Uniswap V3 Router: ${t}`),{UNISWAP_V3_QUOTER:e,UNISWAP_V3_ROUTER:t}}});var pt,ht=x(()=>{"use strict";pt=async(s,e,t,r)=>{console.log("Getting best quote for swap...");let n=new ethers.utils.Interface(["function quoteExactInputSingle((address tokenIn, address tokenOut, uint256 amountIn, uint24 fee, uint160 sqrtPriceLimitX96)) external returns (uint256 amountOut, uint160 sqrtPriceX96After, uint32 initializedTicksCrossed, uint256 gasEstimate)"]),a=[3e3,500],i=null,o=null;for(let p of a)try{let k={tokenIn:params.tokenIn,tokenOut:params.tokenOut,amountIn:t,fee:p,sqrtPriceLimitX96:0};console.log(`Trying fee tier ${p/1e4}%...`);let E=await s.call({to:e,data:n.encodeFunctionData("quoteExactInputSingle",[k])}),[O]=n.decodeFunctionResult("quoteExactInputSingle",E),F=ethers.BigNumber.from(O);(!i||F.gt(i))&&(i=F,o=p,console.log(`New best quote found with fee tier ${p/1e4}%: ${ethers.utils.formatUnits(F,r)}`))}catch(k){k.reason==="Unexpected error"?console.log(`No pool found for fee tier ${p/1e4}%`):console.error("Debug: Quoter call failed for fee tier:",p,k);continue}if(!i||!o)throw new Error("Failed to get quote from Uniswap V3. No valid pool found for this token pair.");let l=i.mul(1e3-.005*1e3).div(1e3);return console.log("Minimum output:",ethers.utils.formatUnits(l,r)),{bestQuote:i,bestFee:o,amountOutMin:l}}});var mt,gt=x(()=>{"use strict";mt=async(s,e)=>{console.log("Getting gas data...");let t=await Lit.Actions.runOnce({waitForResponse:!0,name:"gasPriceGetter"},async()=>{let r=await s.send("eth_feeHistory",["0x1","latest",[]]),n=ethers.BigNumber.from(r.baseFeePerGas[0]),a=await s.getTransactionCount(e),i=n.div(4),o=n.mul(2);return JSON.stringify({maxFeePerGas:o.toHexString(),maxPriorityFeePerGas:i.toHexString(),nonce:a})});return console.log(`Gas data: ${t}`),JSON.parse(t)}});var Oe,yt=x(()=>{"use strict";Oe=async(s,e,t,r,n,a,i)=>{console.log("Estimating gas limit...");try{let o;if(a)o=await r.estimateGas.approve(t,n,{from:e});else if(i){let l=new ethers.utils.Interface(["function exactInputSingle((address,address,uint24,address,uint256,uint256,uint160)) external payable returns (uint256)"]);o=await new ethers.Contract(t,l,s).estimateGas.exactInputSingle([params.tokenIn,params.tokenOut,i.fee,e,n,i.amountOutMin,0],{from:e})}else throw new Error("Missing swap parameters for gas estimation");let c=o.mul(120).div(100);return console.log(`Estimated gas limit: ${c.toString()}`),c}catch(o){console.error("Error estimating gas:",o);let c=a?"100000":"300000";return console.log(`Failed to estimate gas. Using fallback gas limit: ${c}`),ethers.BigNumber.from(c)}}});var Re,vt=x(()=>{"use strict";Re=async(s,e,t,r,n,a,i)=>{console.log("Creating transaction...");let o;if(a)o=new ethers.utils.Interface(["function approve(address spender, uint256 amount) external returns (bool)"]).encodeFunctionData("approve",[s,r]);else if(i)o=new ethers.utils.Interface(["function exactInputSingle((address,address,uint24,address,uint256,uint256,uint160)) external payable returns (uint256)"]).encodeFunctionData("exactInputSingle",[[params.tokenIn,params.tokenOut,i.fee,e,r,i.amountOutMin,0]]);else throw new Error("Missing swap parameters for transaction creation");return{to:a?params.tokenIn:s,data:o,value:"0x0",gasLimit:t.toHexString(),maxFeePerGas:n.maxFeePerGas,maxPriorityFeePerGas:n.maxPriorityFeePerGas,nonce:n.nonce,chainId:params.chainId,type:2}}});var Ne,_t=x(()=>{"use strict";Ne=async(s,e,t)=>{console.log(`Signing TX: ${t}`);let r=s.startsWith("0x")?s.slice(2):s,n=await Lit.Actions.signAndCombineEcdsa({toSign:ethers.utils.arrayify(ethers.utils.keccak256(ethers.utils.serializeTransaction(e))),publicKey:r,sigName:t});return ethers.utils.serializeTransaction(e,ethers.utils.joinSignature({r:"0x"+JSON.parse(n).r.substring(2),s:"0x"+JSON.parse(n).s,v:JSON.parse(n).v}))}});var De,kt=x(()=>{"use strict";De=async(s,e)=>{console.log("Broadcasting transaction...");let t=await Lit.Actions.runOnce({waitForResponse:!0,name:"txnSender"},async()=>{try{let r=await s.sendTransaction(e);return console.log("Transaction sent:",r.hash),r.hash}catch(r){throw console.error("Error broadcasting transaction:",r),r}});if(!ethers.utils.isHexString(t))throw new Error(`Invalid transaction hash: ${t}`);return t}});var xt=x(()=>{"use strict";lt();ft();ht();gt();yt();vt();_t();kt()});var Ds=It(()=>{dt();xt();(async()=>{try{console.log("Using Lit Network: datil-dev"),console.log("Using PKP Tool Registry Address: 0x2707eabb60D262024F8738455811a338B0ECd3EC"),console.log(`Using Pubkey Router Address: ${Te["datil-dev"].pubkeyRouterAddress}`);let{UNISWAP_V3_QUOTER:s,UNISWAP_V3_ROUTER:e}=ut(params.chainId),t=ethers.utils.getAddress(LitAuth.authSigAddress),r=LitAuth.actionIpfsIds[0],n=new ethers.providers.JsonRpcProvider(params.rpcUrl),a=await rt("0x2707eabb60D262024F8738455811a338B0ECd3EC"),i=await tt(params.pkpEthAddress),o=await ct(n,params.tokenIn,params.amountIn,params.tokenOut,i),c=await Xe(a,i.tokenId,t,r);c.enabled&&c.policyIpfsCid!==void 0&&c.policyIpfsCid!=="0x"&&c.policyIpfsCid!==""?(console.log(`Executing policy ${c.policyIpfsCid}`),await Lit.Actions.call({ipfsId:c.policyIpfsCid,params:{parentToolIpfsCid:r,pkpToolRegistryContractAddress:"0x2707eabb60D262024F8738455811a338B0ECd3EC",pkpTokenId:i.tokenId,delegateeAddress:t,toolParameters:{amountIn:o.tokenIn.amount.toString(),tokenIn:params.tokenIn,tokenOut:params.tokenOut}}})):console.log(`No policy found for tool ${r} on PKP ${i.tokenId} for delegatee ${t}`);let{bestFee:l,amountOutMin:p}=await pt(n,s,o.tokenIn.amount,o.tokenOut.decimals),k=await mt(n,i.ethAddress),E=await Oe(n,i.ethAddress,e,o.tokenIn.contract,o.tokenIn.amount,!0),O=await Re(e,i.ethAddress,E,o.tokenIn.amount,k,!0),F=await Ne(i.publicKey,O,"erc20ApprovalSig"),we=await De(n,F);if(console.log("Approval transaction hash:",we),console.log("Waiting for approval confirmation..."),(await n.waitForTransaction(we,1)).status===0)throw new Error("Approval transaction failed");let bt=await Oe(n,i.ethAddress,e,o.tokenIn.contract,o.tokenIn.amount,!1,{fee:l,amountOutMin:p}),Tt=await Re(e,i.ethAddress,bt,o.tokenIn.amount,{...k,nonce:k.nonce+1},!1,{fee:l,amountOutMin:p}),wt=await Ne(i.publicKey,Tt,"erc20SwapSig"),Ze=await De(n,wt);console.log("Swap transaction hash:",Ze),Lit.Actions.setResponse({response:JSON.stringify({status:"success",approvalHash:we,swapHash:Ze})})}catch(s){console.error("Error:",s);let e={message:s.message,code:s.code,reason:s.reason,error:s.error,...s.transaction&&{transaction:s.transaction},...s.receipt&&{receipt:s.receipt}};Lit.Actions.setResponse({response:JSON.stringify({status:"error",error:s.message||String(s),details:e})})}})()});return Ds();})();
